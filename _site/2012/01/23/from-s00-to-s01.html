<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="author" content="Dzenan Ridjanovic"/>
        <title>From Spiral00 To Spiral01</title> 
        <link rel="stylesheet" href="/css/code.css"/>  
        <link rel="stylesheet" href="/css/layout.css"/>
        <link rel="stylesheet" href="/css/link.css"/>
        <link rel="stylesheet" href="/css/list.css"/>
        <link rel="stylesheet" href="/css/menu.css"/>
        <link rel="stylesheet" href="/css/page.css"/>
    </head>

    <body>
        <header>  
            <h1>
                <a href="http://www.ondart.info/"><img src="/img/ondartb1.png"/></a>
               From Spiral00 To Spiral01
               <!--  -->
            </h1>
        </header>

        <nav>
            <ul>
                <li>Dart
                    <ul>
                        <li>
                            <a href="http://www.dartlang.org/">Dart</a>
                        </li>
                        <li>
                            <a href="http://try.dartlang.org/">Dart Console</a>
                        </li>
                    </ul>  
                </li>
                <li>Magic Boxes Code
                    <ul>
                        <li>
                            <a href="http://goo.gl/I72z1">Browse Code</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s11/MagicBoxes/MagicBoxes.html">Design Model</a> 
                        </li>
                        <li>
                            <a href="https://github.com/dzenanr/MagicBoxes">Get Git</a> 
                        </li>
                        <li>
                            <a href="https://github.com/dzenanr/MagicBoxes/tags">Get Spirals</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s00/MagicBoxes/MagicBoxes.html">Spiral 00</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s01/MagicBoxes/MagicBoxes.html">Spiral 01</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s02/MagicBoxes/MagicBoxes.html">Spiral 02</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s03/MagicBoxes/MagicBoxes.html">Spiral 03</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s04/MagicBoxes/MagicBoxes.html">Spiral 04</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s05/MagicBoxes/MagicBoxes.html">Spiral 05</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s06/MagicBoxes/MagicBoxes.html">Spiral 06</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s07/MagicBoxes/MagicBoxes.html">Spiral 07</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s08/MagicBoxes/MagicBoxes.html">Spiral 08</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s09/MagicBoxes/MagicBoxes.html">Spiral 09</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s10/MagicBoxes/MagicBoxes.html">Spiral 10</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s11/MagicBoxes/MagicBoxes.html">Spiral 11</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s12/MagicBoxes/MagicBoxes.html">Spiral 12</a> 
                        </li>
                    </ul>  
                </li>
                <li>Magic Boxes Posts
                    <ul>
                        <li>
                            <a href="http://dzenanr.github.com/2012/01/23/from-s00-to-s01.html">From Spiral00 To Spiral01</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/01/31/from-s01-to-s02.html">From Spiral01 To Spiral02</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/02/from-s02-to-s03.html">From Spiral02 To Spiral03</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/07/from-s03-to-s04.html">From Spiral03 To Spiral04</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/10/from-s04-to-s05.html">From Spiral04 To Spiral05</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/15/from-s05-to-s06.html">From Spiral05 To Spiral06</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/21/from-s06-to-s07.html">From Spiral06 To Spiral07</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/24/from-s07-to-s08.html">From Spiral07 To Spiral08</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/29/from-s08-to-s09.html">From Spiral08 To Spiral09</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/03/10/from-s09-to-s10.html">From Spiral09 To Spiral10</a> 
                        </li>
                        <li>
                            &nbsp; 
                        </li>
                    </ul>  
                </li>
                <li>On Dart
                    <ul>
                        <li>
                            <a href="https://plus.google.com/u/0/b/113649577593294551754/113649577593294551754/posts">Google+ Page</a> 
                        </li>
                    </ul>  
                </li>
                <li>About
                    <ul>
                        <li>
                            <a href="http://goo.gl/f1F2e">D. R. (CV in PDF)</a> 
                        </li>
                    </ul>  
                </li>
            </ul>
        </nav>

        <section>
            <p>The code for the MagicBoxes project is at <a href='https://github.com/dzenanr/MagicBoxes'>MagicBoxes on GitHub</a>. You can execute the code by selecting the spiral number in the MagicBoxes menu at the beginning of the post.</p>

<p>In Spiral 00, the code was generated by Dart Editor. The &#8220;Hello World!&#8221; text is displayed in a web page. In Spiral 01, the code from Spiral 00 is changed to display two rectangles (boxes).</p>

<p>The code for the mb project is at <a href='https://github.com/dzenanr/mb'>mb on GitHub</a>. For teaching or learning purposes, each spiral in MagicBoxes is decomposed into several sub-spirals. For example, to explain a transition from Spiral 00 to Spiral 01 (00-01), the transition is decomposed into small changes (01, 02, &#8230;).</p>

<p><strong>Code 00-01.01</strong>: mb.dart from Spiral 00.</p>
<div class='highlight'><pre><code class='java'><span class='err'>#</span><span class='n'>import</span><span class='o'>(</span><span class='err'>&#39;</span><span class='nl'>dart:</span><span class='n'>html</span><span class='err'>&#39;</span><span class='o'>);</span>

<span class='kd'>class</span> <span class='nc'>mb</span> <span class='o'>{</span>

  <span class='n'>mb</span><span class='o'>()</span> <span class='o'>{</span>
  <span class='o'>}</span>

  <span class='kt'>void</span> <span class='nf'>run</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='n'>write</span><span class='o'>(</span><span class='s'>&quot;Hello World!&quot;</span><span class='o'>);</span>
  <span class='o'>}</span><span class='nl'>http:</span><span class='c1'>//dzenanr.github.com/</span>

  <span class='kt'>void</span> <span class='nf'>write</span><span class='o'>(</span><span class='n'>String</span> <span class='n'>message</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='c1'>// the HTML library defines a global &quot;document&quot; variable</span>
    <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>status</span><span class='err'>&#39;</span><span class='o'>).</span><span class='na'>innerHTML</span> <span class='o'>=</span> <span class='n'>message</span><span class='o'>;</span>
  <span class='o'>}</span>
<span class='o'>}</span>

<span class='kt'>void</span> <span class='nf'>main</span><span class='o'>()</span> <span class='o'>{</span>
  <span class='k'>new</span> <span class='nf'>mb</span><span class='o'>().</span><span class='na'>run</span><span class='o'>();</span>
<span class='o'>}</span>
</code></pre>
</div>
<p><strong>Code 00-01.02</strong>: mb.html from Spiral 00.</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;html&gt;</span>
  <span class='nt'>&lt;head&gt;</span>
    <span class='nt'>&lt;title&gt;</span>mb<span class='nt'>&lt;/title&gt;</span>
  <span class='nt'>&lt;/head&gt;</span>
  <span class='nt'>&lt;body&gt;</span>
    <span class='nt'>&lt;h1&gt;</span>mb<span class='nt'>&lt;/h1&gt;</span>
    <span class='nt'>&lt;h2</span> <span class='na'>id=</span><span class='s'>&quot;status&quot;</span><span class='nt'>&gt;</span>dart is not running<span class='nt'>&lt;/h2&gt;</span>
    <span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;mb.dart.app.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
  <span class='nt'>&lt;/body&gt;</span>
<span class='nt'>&lt;/html&gt;</span>
</code></pre>
</div>
<p>The generated code displays the “Hello World!” message in a web page (Figure 00-01.01).</p>

<p><img src='/img/s00s01/HelloWorld.png' alt='Alt Figure 00-01.01: Hello World!' /></p>

<p><strong>Figure 00-01.01</strong>: Hello World!</p>

<p>This code was a starting point for producing Spiral 01 (Figure 00-01.02).</p>

<p><img src='/img/s00s01/TwoBoxes.png' alt='Alt Figure 00-01.02: Two static boxes.' /></p>

<p><strong>Figure 00-01.02</strong>: Two static boxes.</p>

<p>Here, the changes from Spiral 00 to Spiral 01 will be presented as sub-spirals.</p>

<p>The first change is the simplification of the main method.</p>

<p><strong>Code 00-01.03</strong>: The minimal main method.</p>
<div class='highlight'><pre><code class='java'><span class='err'>#</span><span class='n'>import</span><span class='o'>(</span><span class='err'>&#39;</span><span class='nl'>dart:</span><span class='n'>html</span><span class='err'>&#39;</span><span class='o'>);</span>

<span class='c1'>// s00.s01</span>

<span class='c1'>// Use Ctrl-Shift-J in Chrome to see the Console with the printed text.</span>

<span class='n'>main</span><span class='o'>()</span> <span class='o'>{</span>
  <span class='n'>print</span><span class='o'>(</span><span class='err'>&#39;</span><span class='n'>Hello</span> <span class='n'>mb</span><span class='err'>&#39;</span><span class='o'>);</span>
<span class='o'>}</span>
</code></pre>
</div>
<p>The main method does not have any parameters. The print function belongs to the dart:core library. It prints a text given as the argument of the function to the Console of the Chrome browser. The console is opened by using the Ctrl-Shift-J keys.</p>

<p><strong>Code 00-01.04</strong>: The minimal html code.</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;html&gt;</span>
  <span class='nt'>&lt;head&gt;</span>
    <span class='nt'>&lt;title&gt;</span>mb<span class='nt'>&lt;/title&gt;</span>
  <span class='nt'>&lt;/head&gt;</span>
  <span class='nt'>&lt;body&gt;</span>
    <span class='nt'>&lt;h1&gt;</span>mb<span class='nt'>&lt;/h1&gt;</span>
    <span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;mb.dart.app.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
  <span class='nt'>&lt;/body&gt;</span>
<span class='nt'>&lt;/html&gt;</span>
</code></pre>
</div>
<p>Note that the JavaScript file name is now mb.dart.app.js.</p>

<p>The next step is to modify both mb.dart and mb.html to add to the main function the code for drawing a border and two boxes.</p>

<p><strong>Code 00-01.05</strong>: Drawings in the main method.</p>
<div class='highlight'><pre><code class='java'><span class='err'>#</span><span class='n'>import</span><span class='o'>(</span><span class='err'>&#39;</span><span class='nl'>dart:</span><span class='n'>html</span><span class='err'>&#39;</span><span class='o'>);</span>
<span class='c1'>// s01.s00</span>

<span class='n'>main</span><span class='o'>()</span> <span class='o'>{</span>
  <span class='c1'>// Get a reference to the canvas.</span>
  <span class='n'>var</span> <span class='n'>canvas</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>canvas</span><span class='err'>&#39;</span><span class='o'>);</span>
  <span class='n'>var</span> <span class='n'>context</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>getContext</span><span class='o'>(</span><span class='s'>&quot;2d&quot;</span><span class='o'>);</span>
  <span class='n'>var</span> <span class='n'>width</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>width</span><span class='o'>;</span>
  <span class='n'>var</span> <span class='n'>height</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>height</span><span class='o'>;</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>beginPath</span><span class='o'>();</span>
  <span class='c1'>// border</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>0</span><span class='o'>,</span> <span class='mi'>0</span><span class='o'>,</span> <span class='n'>width</span><span class='o'>,</span> <span class='n'>height</span><span class='o'>);</span>
  <span class='c1'>// box 1</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>20</span><span class='o'>,</span> <span class='mi'>20</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>,</span> <span class='mi'>60</span><span class='o'>);</span>
  <span class='c1'>// box 2</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>120</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>,</span> <span class='mi'>60</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>);</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>closePath</span><span class='o'>();</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>stroke</span><span class='o'>();</span>
<span class='o'>}</span>
</code></pre>
</div>
<p>The main function first finds the canvas element in the html page and converts it into a variable with the canvas name. The getContext method on the canvas object (object.method) returns a two dimensional context of the canvas. The width and height variables are initialized to the corresponding values of the canvas object, which are defined in mb.html.</p>

<p><strong>Code 00-01.06</strong>: Width and height of canvas.</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;html&gt;</span>
  <span class='nt'>&lt;head&gt;</span>
    <span class='nt'>&lt;title&gt;</span>mb<span class='nt'>&lt;/title&gt;</span>
  <span class='nt'>&lt;/head&gt;</span>
  
  <span class='nt'>&lt;body&gt;</span>
    <span class='nt'>&lt;section&gt;</span> 
      <span class='nt'>&lt;header&gt;</span>
        <span class='nt'>&lt;h2&gt;</span>Two Boxes<span class='nt'>&lt;/h2&gt;</span>
      <span class='nt'>&lt;/header&gt;</span>
      <span class='nt'>&lt;canvas</span> <span class='na'>id=</span><span class='s'>&quot;canvas&quot;</span> <span class='na'>width=</span><span class='s'>&quot;600&quot;</span> <span class='na'>height=</span><span class='s'>&quot;400&quot;</span><span class='nt'>&gt;&lt;/canvas&gt;</span>
      <span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;mb.dart.app.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
    <span class='nt'>&lt;/section&gt;</span>
  <span class='nt'>&lt;/body&gt;</span>
<span class='nt'>&lt;/html&gt;</span>
</code></pre>
</div>
<p>A border is prepared to be drawn by the rect method as a rectangle with its relative position with respect to canvas at the (x, y) point, and its size equal to the size of canvas. Two boxes are prepared in the similar way. The drawing is defined between the beginPath and closePath methods. The actual drawing is done by the stroke method.</p>

<p>The next change is to introduce types of variables, or more precisely classes of objects. Types are useful in Dart Editor. When they are used, after the current object and the dot after it, Dart Editor offers a list of possible methods.</p>

<p><strong>Code 00-01.07</strong>: Types (classes).</p>
<div class='highlight'><pre><code class='java'><span class='err'>#</span><span class='n'>import</span><span class='o'>(</span><span class='err'>&#39;</span><span class='nl'>dart:</span><span class='n'>html</span><span class='err'>&#39;</span><span class='o'>);</span>

<span class='c1'>// s01.s01</span>

<span class='kt'>void</span> <span class='nf'>main</span><span class='o'>()</span> <span class='o'>{</span>
  <span class='c1'>// Get a reference to the canvas.</span>
  <span class='n'>CanvasElement</span> <span class='n'>canvas</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>canvas</span><span class='err'>&#39;</span><span class='o'>);</span>
  <span class='n'>CanvasRenderingContext2D</span> <span class='n'>context</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>getContext</span><span class='o'>(</span><span class='s'>&quot;2d&quot;</span><span class='o'>);</span>
  <span class='kt'>int</span> <span class='n'>width</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>width</span><span class='o'>;</span>
  <span class='kt'>int</span> <span class='n'>height</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>height</span><span class='o'>;</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>beginPath</span><span class='o'>();</span>
  <span class='c1'>// border</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>0</span><span class='o'>,</span> <span class='mi'>0</span><span class='o'>,</span> <span class='n'>width</span><span class='o'>,</span> <span class='n'>height</span><span class='o'>);</span>
  <span class='c1'>// box 1</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>20</span><span class='o'>,</span> <span class='mi'>20</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>,</span> <span class='mi'>60</span><span class='o'>);</span>
  <span class='c1'>// box 2</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>120</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>,</span> <span class='mi'>60</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>);</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>closePath</span><span class='o'>();</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>stroke</span><span class='o'>();</span>
<span class='o'>}</span>
</code></pre>
</div>
<p>The CanvasElement class defines a canvas. The CanvasRenderingContext2D class defines a two-dimensional context of canvas. The int class represents integer values. The main method delegates its work to methods of the CanvasRenderingContext2D class. However, it does not return a value or an object of a class, which is pointed out by the void keyword.</p>

<p>The main method is used as the entry point for the code execution. In general, it should be made short by delegating work to other functions.</p>

<p><strong>Code 00-01.08</strong>: Function.</p>
<div class='highlight'><pre><code class='java'><span class='err'>#</span><span class='n'>import</span><span class='o'>(</span><span class='err'>&#39;</span><span class='nl'>dart:</span><span class='n'>html</span><span class='err'>&#39;</span><span class='o'>);</span>

<span class='c1'>// s01.s02</span>

<span class='kt'>void</span> <span class='nf'>displayBoxes</span><span class='o'>(</span><span class='n'>CanvasElement</span> <span class='n'>canvas</span><span class='o'>)</span> <span class='o'>{</span>
  <span class='n'>CanvasRenderingContext2D</span> <span class='n'>context</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>getContext</span><span class='o'>(</span><span class='s'>&quot;2d&quot;</span><span class='o'>);</span>
  <span class='kt'>int</span> <span class='n'>width</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>width</span><span class='o'>;</span>
  <span class='kt'>int</span> <span class='n'>height</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>height</span><span class='o'>;</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>beginPath</span><span class='o'>();</span>
  <span class='c1'>// border</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>0</span><span class='o'>,</span> <span class='mi'>0</span><span class='o'>,</span> <span class='n'>width</span><span class='o'>,</span> <span class='n'>height</span><span class='o'>);</span>
  <span class='c1'>// box 1</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>20</span><span class='o'>,</span> <span class='mi'>20</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>,</span> <span class='mi'>60</span><span class='o'>);</span>
  <span class='c1'>// box 2</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>120</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>,</span> <span class='mi'>60</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>);</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>closePath</span><span class='o'>();</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>stroke</span><span class='o'>();</span>
<span class='o'>}</span>

<span class='kt'>void</span> <span class='nf'>main</span><span class='o'>()</span> <span class='o'>{</span>
  <span class='c1'>// Get a reference to the canvas.</span>
  <span class='n'>CanvasElement</span> <span class='n'>canvas</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>canvas</span><span class='err'>&#39;</span><span class='o'>);</span>
  <span class='n'>displayBoxes</span><span class='o'>(</span><span class='n'>canvas</span><span class='o'>);</span>
<span class='o'>}</span>
</code></pre>
</div>
<p>After the canvas object is obtained, it is passed as an argument to the displayBoxes function.</p>

<p>The next step is to keep one objective for each function.</p>

<p><strong>Code 00-01.09</strong>: Functions.</p>
<div class='highlight'><pre><code class='java'><span class='err'>#</span><span class='n'>import</span><span class='o'>(</span><span class='err'>&#39;</span><span class='nl'>dart:</span><span class='n'>html</span><span class='err'>&#39;</span><span class='o'>);</span>

<span class='c1'>// s01.s03</span>

<span class='kt'>void</span> <span class='nf'>displayBoxes</span><span class='o'>(</span><span class='n'>CanvasRenderingContext2D</span> <span class='n'>context</span><span class='o'>)</span> <span class='o'>{</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>beginPath</span><span class='o'>();</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>20</span><span class='o'>,</span> <span class='mi'>20</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>,</span> <span class='mi'>60</span><span class='o'>);</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>120</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>,</span> <span class='mi'>60</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>);</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>closePath</span><span class='o'>();</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>stroke</span><span class='o'>();</span>
<span class='o'>}</span>

<span class='kt'>void</span> <span class='nf'>displayBord</span><span class='o'>(</span><span class='n'>CanvasElement</span> <span class='n'>canvas</span><span class='o'>)</span> <span class='o'>{</span>
  <span class='n'>CanvasRenderingContext2D</span> <span class='n'>context</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>getContext</span><span class='o'>(</span><span class='s'>&quot;2d&quot;</span><span class='o'>);</span>
  <span class='kt'>int</span> <span class='n'>width</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>width</span><span class='o'>;</span>
  <span class='kt'>int</span> <span class='n'>height</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>height</span><span class='o'>;</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>beginPath</span><span class='o'>();</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>0</span><span class='o'>,</span> <span class='mi'>0</span><span class='o'>,</span> <span class='n'>width</span><span class='o'>,</span> <span class='n'>height</span><span class='o'>);</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>closePath</span><span class='o'>();</span>
  <span class='n'>context</span><span class='o'>.</span><span class='na'>stroke</span><span class='o'>();</span>
  <span class='n'>displayBoxes</span><span class='o'>(</span><span class='n'>context</span><span class='o'>);</span>
<span class='o'>}</span>

<span class='kt'>void</span> <span class='nf'>main</span><span class='o'>()</span> <span class='o'>{</span>
  <span class='c1'>// Get a reference to the canvas.</span>
  <span class='n'>CanvasElement</span> <span class='n'>canvas</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>canvas</span><span class='err'>&#39;</span><span class='o'>);</span>
  <span class='n'>displayBord</span><span class='o'>(</span><span class='n'>canvas</span><span class='o'>);</span>
<span class='o'>}</span>
</code></pre>
</div>
<p>The objective of the main function is to obtain canvas and to delegate drawings to the displayBord function. The objective of the displayBord function is to draw a border and to delegate drawings of boxes to the displayBoxes function.</p>

<p>Up to now, our code consists of functions. The same can be accomplished by defining the Board class that will handle drawings. The class is defined within Dart Editor by using the File menu and the New File… menu item. The new file is named Border.dart. By doing this, Dart Editor adds the #source(‘Board.dart’); to the mb.dart file.</p>

<p>The main method of mb.dart creates a board as an object of the Board class. This is accomplished by using the new keyword and by the constructor method of the Board class.</p>

<p><strong>Code 00-01.10</strong>: The main function creates an object of the Board class.</p>
<div class='highlight'><pre><code class='java'><span class='err'>#</span><span class='n'>import</span><span class='o'>(</span><span class='err'>&#39;</span><span class='nl'>dart:</span><span class='n'>html</span><span class='err'>&#39;</span><span class='o'>);</span>
<span class='err'>#</span><span class='n'>source</span><span class='o'>(</span><span class='err'>&#39;</span><span class='n'>Board</span><span class='o'>.</span><span class='na'>dart</span><span class='err'>&#39;</span><span class='o'>);</span>

<span class='c1'>// s01.s04</span>

<span class='kt'>void</span> <span class='nf'>main</span><span class='o'>()</span> <span class='o'>{</span>
  <span class='c1'>// Get a reference to the canvas.</span>
  <span class='n'>CanvasElement</span> <span class='n'>canvas</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>canvas</span><span class='err'>&#39;</span><span class='o'>);</span>
  <span class='k'>new</span> <span class='nf'>Board</span><span class='o'>(</span><span class='n'>canvas</span><span class='o'>);</span>
<span class='o'>}</span>
</code></pre>
</div>
<p><strong>Code 00-01.11</strong>: The Board class.</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>Board</span> <span class='o'>{</span>
  
  <span class='kt'>int</span> <span class='n'>x</span> <span class='o'>=</span> <span class='mi'>0</span><span class='o'>;</span>
  <span class='kt'>int</span> <span class='n'>y</span> <span class='o'>=</span> <span class='mi'>0</span><span class='o'>;</span>
  <span class='kt'>int</span> <span class='n'>width</span><span class='o'>;</span>
  <span class='kt'>int</span> <span class='n'>height</span><span class='o'>;</span>
  
  <span class='n'>CanvasRenderingContext2D</span> <span class='n'>context</span><span class='o'>;</span>
  
  <span class='n'>Board</span><span class='o'>(</span><span class='n'>CanvasElement</span> <span class='n'>canvas</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='n'>context</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>getContext</span><span class='o'>(</span><span class='s'>&quot;2d&quot;</span><span class='o'>);</span>
    <span class='n'>width</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>width</span><span class='o'>;</span>
    <span class='n'>height</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>height</span><span class='o'>;</span>
    <span class='n'>border</span><span class='o'>();</span>
    <span class='n'>init</span><span class='o'>();</span>
  <span class='o'>}</span>
  
  <span class='kt'>void</span> <span class='nf'>init</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='n'>context</span><span class='o'>.</span><span class='na'>beginPath</span><span class='o'>();</span>
    <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>20</span><span class='o'>,</span> <span class='mi'>20</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>,</span> <span class='mi'>60</span><span class='o'>);</span>
    <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='mi'>120</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>,</span> <span class='mi'>60</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>);</span>
    <span class='n'>context</span><span class='o'>.</span><span class='na'>closePath</span><span class='o'>();</span>
    <span class='n'>context</span><span class='o'>.</span><span class='na'>stroke</span><span class='o'>();</span>
  <span class='o'>}</span>
  
  <span class='kt'>void</span> <span class='nf'>border</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='n'>context</span><span class='o'>.</span><span class='na'>beginPath</span><span class='o'>();</span>
    <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='n'>x</span><span class='o'>,</span> <span class='n'>y</span><span class='o'>,</span> <span class='n'>width</span><span class='o'>,</span> <span class='n'>height</span><span class='o'>);</span>
    <span class='n'>context</span><span class='o'>.</span><span class='na'>closePath</span><span class='o'>();</span>
    <span class='n'>context</span><span class='o'>.</span><span class='na'>stroke</span><span class='o'>();</span>
  <span class='o'>}</span>

<span class='o'>}</span>
</code></pre>
</div>
<p>Conceptually, the Board class represents a place where boxes will be drawn. Its constructor accepts a canvas object of the CanvasElement class. The getContext method of the CanvasElement class applied to the canvas object returns a two dimensional context of the canvas. This context is an attribute (or a field) of the Board class. While methods represent operations, attributes stand for data. Other attributes of the Board class are x, y, width and height. Their values are of the int (integer) type. The x and y attributes are initialized to zero, while the values of the width and height attributes are obtained from the corresponding attributes of the canvas object.</p>

<p>At the end of the construction process, a border of the board is drawn with the border method. Finally, the board is initialized with two boxes drawn by the init method. Methods of the class have a direct access to attributes of the class.</p>

<p>The HTML document is declared to be of the html type. The simple DOCTYPE syntax is introduced by HML5. Two meta elements in the head element, define a character set as utf-8, and an author of the page as Dzenan Ridjanovic. The body element has now the header element that displays the title of the page, in addition to the title of the section where canvas is placed.</p>

<p><strong>Code 00-01.12</strong>: The HTML file.</p>
<div class='highlight'><pre><code class='html'><span class='cp'>&lt;!DOCTYPE html&gt;</span>

<span class='nt'>&lt;html&gt;</span>
  <span class='nt'>&lt;head&gt;</span>
    <span class='nt'>&lt;meta</span> <span class='na'>charset=</span><span class='s'>&quot;utf-8&quot;</span><span class='nt'>/&gt;</span>
    <span class='nt'>&lt;meta</span> <span class='na'>name=</span><span class='s'>&quot;author&quot;</span> <span class='na'>content=</span><span class='s'>&quot;Dzenan Ridjanovic&quot;</span><span class='nt'>/&gt;</span>
    <span class='nt'>&lt;title&gt;</span>mb<span class='nt'>&lt;/title&gt;</span>
  <span class='nt'>&lt;/head&gt;</span>
  
  <span class='nt'>&lt;body&gt;</span>
    <span class='nt'>&lt;header&gt;</span>
      <span class='nt'>&lt;h1&gt;</span>Magic Boxes in Dart<span class='nt'>&lt;/h1&gt;</span>
    <span class='nt'>&lt;/header&gt;</span>
    
    <span class='nt'>&lt;section&gt;</span> 
      <span class='nt'>&lt;header&gt;</span>
        <span class='nt'>&lt;h2&gt;</span>Two Boxes<span class='nt'>&lt;/h2&gt;</span>
      <span class='nt'>&lt;/header&gt;</span>
      <span class='nt'>&lt;canvas</span> <span class='na'>id=</span><span class='s'>&quot;canvas&quot;</span> <span class='na'>width=</span><span class='s'>&quot;600&quot;</span> <span class='na'>height=</span><span class='s'>&quot;400&quot;</span><span class='nt'>&gt;&lt;/canvas&gt;</span>
      <span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;mb.dart.app.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
    <span class='nt'>&lt;/section&gt;</span>
  <span class='nt'>&lt;/body&gt;</span>
<span class='nt'>&lt;/html&gt;</span>
</code></pre>
</div>
<p>Finally, the Box.dart file is created by using the File menu and the New File… menu item.</p>

<p><strong>Code 00-01.13</strong>: The Box class.</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>Box</span> <span class='o'>{</span>
  
  <span class='n'>Board</span> <span class='n'>board</span><span class='o'>;</span>
  
  <span class='kt'>int</span> <span class='n'>x</span><span class='o'>;</span>
  <span class='kt'>int</span> <span class='n'>y</span><span class='o'>;</span>
  <span class='kt'>int</span> <span class='n'>width</span><span class='o'>;</span>
  <span class='kt'>int</span> <span class='n'>height</span><span class='o'>;</span>
  
  <span class='n'>Box</span><span class='o'>(</span><span class='k'>this</span><span class='o'>.</span><span class='na'>board</span><span class='o'>,</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>x</span><span class='o'>,</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span><span class='o'>,</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>width</span><span class='o'>,</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>height</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='n'>draw</span><span class='o'>();</span>
  <span class='o'>}</span>
  
  <span class='kt'>void</span> <span class='nf'>draw</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>beginPath</span><span class='o'>();</span>
    <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='n'>x</span><span class='o'>,</span> <span class='n'>y</span><span class='o'>,</span> <span class='n'>width</span><span class='o'>,</span> <span class='n'>height</span><span class='o'>);</span>
    <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>closePath</span><span class='o'>();</span>
    <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>stroke</span><span class='o'>();</span>
  <span class='o'>}</span>

<span class='o'>}</span>
</code></pre>
</div>
<p>The constructor method of the Box class accepts five arguments that are assigned automatically to the corresponding attributes of the class. The this keyword represents the current object of the Box class, and its use as a qualifier of the five parameters indicates the assignment shortcut. A box is drawn by the draw method. The five attributes are used to accomplish the drawing task.</p>

<p>The init method of the Board class constructs two boxes.</p>

<p><strong>Code 00-01.14</strong>: Construction of two boxes.</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>Board</span> <span class='o'>{</span>
  
  <span class='kt'>int</span> <span class='n'>x</span> <span class='o'>=</span> <span class='mi'>0</span><span class='o'>;</span>
  <span class='kt'>int</span> <span class='n'>y</span> <span class='o'>=</span> <span class='mi'>0</span><span class='o'>;</span>
  <span class='kt'>int</span> <span class='n'>width</span><span class='o'>;</span>
  <span class='kt'>int</span> <span class='n'>height</span><span class='o'>;</span>
  
  <span class='n'>CanvasRenderingContext2D</span> <span class='n'>context</span><span class='o'>;</span>
  
  <span class='n'>Board</span><span class='o'>(</span><span class='n'>CanvasElement</span> <span class='n'>canvas</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='n'>context</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>getContext</span><span class='o'>(</span><span class='s'>&quot;2d&quot;</span><span class='o'>);</span>
    <span class='n'>width</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>width</span><span class='o'>;</span>
    <span class='n'>height</span> <span class='o'>=</span> <span class='n'>canvas</span><span class='o'>.</span><span class='na'>height</span><span class='o'>;</span>
    <span class='n'>border</span><span class='o'>();</span>
    <span class='n'>init</span><span class='o'>();</span>
  <span class='o'>}</span>
  
  <span class='kt'>void</span> <span class='nf'>init</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='k'>new</span> <span class='nf'>Box</span><span class='o'>(</span><span class='k'>this</span><span class='o'>,</span> <span class='mi'>20</span><span class='o'>,</span> <span class='mi'>20</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>,</span> <span class='mi'>60</span><span class='o'>);</span>
    <span class='k'>new</span> <span class='nf'>Box</span><span class='o'>(</span><span class='k'>this</span><span class='o'>,</span> <span class='mi'>120</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>,</span> <span class='mi'>60</span><span class='o'>,</span> <span class='mi'>40</span><span class='o'>);</span>
  <span class='o'>}</span>
  
  <span class='kt'>void</span> <span class='nf'>border</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='n'>context</span><span class='o'>.</span><span class='na'>beginPath</span><span class='o'>();</span>
    <span class='n'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='n'>x</span><span class='o'>,</span> <span class='n'>y</span><span class='o'>,</span> <span class='n'>width</span><span class='o'>,</span> <span class='n'>height</span><span class='o'>);</span>
    <span class='n'>context</span><span class='o'>.</span><span class='na'>closePath</span><span class='o'>();</span>
    <span class='n'>context</span><span class='o'>.</span><span class='na'>stroke</span><span class='o'>();</span>
  <span class='o'>}</span>

<span class='o'>}</span>
</code></pre>
</div>
<p>The main method adds a redundant object. Since the board object is not used further in the main method, there was no reason to introduce it.</p>

<p><strong>Code 00-01.15</strong>: Box source.</p>
<div class='highlight'><pre><code class='java'><span class='err'>#</span><span class='n'>import</span><span class='o'>(</span><span class='err'>&#39;</span><span class='nl'>dart:</span><span class='n'>html</span><span class='err'>&#39;</span><span class='o'>);</span>
<span class='err'>#</span><span class='n'>source</span><span class='o'>(</span><span class='err'>&#39;</span><span class='n'>Board</span><span class='o'>.</span><span class='na'>dart</span><span class='err'>&#39;</span><span class='o'>);</span>
<span class='err'>#</span><span class='n'>source</span><span class='o'>(</span><span class='err'>&#39;</span><span class='n'>Box</span><span class='o'>.</span><span class='na'>dart</span><span class='err'>&#39;</span><span class='o'>);</span>

<span class='c1'>// s01.s05</span>

<span class='kt'>void</span> <span class='nf'>main</span><span class='o'>()</span> <span class='o'>{</span>
  <span class='c1'>// Get a reference to the canvas.</span>
  <span class='n'>CanvasElement</span> <span class='n'>canvas</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>canvas</span><span class='err'>&#39;</span><span class='o'>);</span>
  <span class='n'>Board</span> <span class='n'>board</span> <span class='o'>=</span> <span class='k'>new</span> <span class='n'>Board</span><span class='o'>(</span><span class='n'>canvas</span><span class='o'>);</span>
<span class='o'>}</span>
</code></pre>
</div>
<p>Even if the Box class is not used directly by the main method, its source is added by Dart Editor.</p>
        </section>

        <section>
     
        </section>

        <footer>
          <a href="http://dzenanr.github.com/ondart.rss">
            <img src="/img/xml.gif" width=36 height=14 alt="RSS feed for this site" border=0>
          </a>
        </footer>

    </body>
</html>


