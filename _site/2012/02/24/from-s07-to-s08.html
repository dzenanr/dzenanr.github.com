<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="author" content="Dzenan Ridjanovic"/>
        <title>From Spiral07 To Spiral08</title> 
        <link rel="stylesheet" href="/css/code.css"/>  
        <link rel="stylesheet" href="/css/layout.css"/>
        <link rel="stylesheet" href="/css/link.css"/>
        <link rel="stylesheet" href="/css/list.css"/>
        <link rel="stylesheet" href="/css/menu.css"/>
        <link rel="stylesheet" href="/css/page.css"/>
    </head>

    <body>
        <header>  
            <h1>
                <a href="http://www.ondart.info/"><img src="/img/ondartb1.png"/></a>
               From Spiral07 To Spiral08
               <!--  -->
            </h1>
        </header>

        <nav>
            <ul>
                <li>Dart
                    <ul>
                        <li>
                            <a href="http://www.dartlang.org/">Dart</a>
                        </li>
                        <li>
                            <a href="http://try.dartlang.org/">Dart Console</a>
                        </li>
                    </ul>  
                </li>
                <li>Magic Boxes
                    <ul>
                        <li>
                            <a href="http://goo.gl/I72z1">Browse Code</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s11/MagicBoxes/MagicBoxes.html">Design Model</a> 
                        </li>
                        <li>
                            <a href="https://github.com/dzenanr/MagicBoxes">Get Git</a> 
                        </li>
                        <li>
                            <a href="https://github.com/dzenanr/MagicBoxes/tags">Get Spirals</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s00/MagicBoxes/MagicBoxes.html">Spiral 00</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s01/MagicBoxes/MagicBoxes.html">Spiral 01</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s02/MagicBoxes/MagicBoxes.html">Spiral 02</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s03/MagicBoxes/MagicBoxes.html">Spiral 03</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s04/MagicBoxes/MagicBoxes.html">Spiral 04</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s05/MagicBoxes/MagicBoxes.html">Spiral 05</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s06/MagicBoxes/MagicBoxes.html">Spiral 06</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s07/MagicBoxes/MagicBoxes.html">Spiral 07</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s08/MagicBoxes/MagicBoxes.html">Spiral 08</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s09/MagicBoxes/MagicBoxes.html">Spiral 09</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s10/MagicBoxes/MagicBoxes.html">Spiral 10</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s11/MagicBoxes/MagicBoxes.html">Spiral 11</a> 
                        </li>
                        <li>
                            <a href="/mb/spirals/s12/MagicBoxes/MagicBoxes.html">Spiral 12</a> 
                        </li>
                    </ul>  
                </li>
                <li>On Dart
                    <ul>
                        <li>
                            <a href="https://plus.google.com/u/0/b/113649577593294551754/113649577593294551754/posts">Google+ Page</a> 
                        </li>
                    </ul>  
                </li>
                <li>Posts
                    <ul>
                        <li>
                            <a href="http://dzenanr.github.com/2012/01/23/from-s00-to-s01.html">From Spiral00 To Spiral01</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/01/31/from-s01-to-s02.html">From Spiral01 To Spiral02</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/02/from-s02-to-s03.html">From Spiral02 To Spiral03</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/07/from-s03-to-s04.html">From Spiral03 To Spiral04</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/10/from-s04-to-s05.html">From Spiral04 To Spiral05</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/15/from-s05-to-s06.html">From Spiral05 To Spiral06</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/21/from-s06-to-s07.html">From Spiral06 To Spiral07</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/24/from-s07-to-s08.html">From Spiral07 To Spiral08</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/02/29/from-s08-to-s09.html">From Spiral08 To Spiral09</a> 
                        </li>
                        <li>
                            <a href="http://dzenanr.github.com/2012/03/10/from-s09-to-s10.html">From Spiral09 To Spiral10</a> 
                        </li>
                        <li>
                            &nbsp; 
                        </li>
                    </ul>  
                </li>
                <li>About
                    <ul>
                        <li>
                            <a href="http://goo.gl/f1F2e">D. R. (CV in PDF)</a> 
                        </li>
                    </ul>  
                </li>
            </ul>
        </nav>

        <section>
            <h2 id='code'>Code</h2>

<p>The code for the MagicBoxes project is at <a href='https://github.com/dzenanr/MagicBoxes'>MagicBoxes on GitHub</a>. The code for the mb project is at <a href='https://github.com/dzenanr/mb'>mb on GitHub</a>. For teaching or learning purposes, each spiral in MagicBoxes is decomposed into several steps in mb.</p>

<p>The use of the script element in the MagicBoxes.html file has changed from</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span> <span class='na'>src=</span><span class='s'>&quot;MagicBoxes.dart.app.js&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
</code></pre>
</div>
<p>to</p>
<div class='highlight'><pre><code class='html'><span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;application/dart&quot;</span> <span class='na'>src=</span><span class='s'>&quot;MagicBoxes.dart&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
<span class='nt'>&lt;script</span>
<span class='nt'>  </span><span class='na'>src=</span><span class='s'>&quot;http://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js&quot;</span><span class='nt'>&gt;</span>
<span class='nt'>&lt;/script&gt;</span>
</code></pre>
</div>
<p>This change requires the Internet access when you run code in the Dart Editor.</p>

<p>If you use Spirals 00 … 11 locally, checkout branches s00a … s11a, where changes have been made.</p>

<h2 id='overview'>Overview</h2>

<p>In Spiral 07, a line may be selected and deleted.</p>

<p>In Spiral 08, for the last selected box, its title may be changed and an item may be added.</p>

<p>The tool bar has two input elements (fields), one for a box title (name) and the other for entering box items (Figure 07-08.01). A box may be seen as a concept (an entity) in modeling. Consequently, a box item may be considered as an attribute of the concept. In addition, an item may be declared as the globally unique identifier (guid), which has a universally unique value such as a time stamp. An item may be the identifier of its concept, or a part of the identifier (significant to a user). Finally, an item may be required (its value is required).</p>

<p><img src='/img/s07s08/ProjectTasksModel.png' alt='Alt Figure 07-08.01: A simple model with concepts, attributes and a relationship' /></p>

<p><strong>Figure 07-08.01</strong>: A simple model with concepts, attributes and a relationship.</p>

<p>A line between two boxes, may be considered as a relationship between two concepts. Thus, in Figure 07-08.01, a simple model has two concepts and one relationship. The Project and Task concepts have both three attributes. The project identifier is number (italics and bold). The objective attribute is required (bold). The description attribute is optional. A project may have from 0 to N (many) tasks. A task must belong to a project.</p>

<p>For the last selected box, its title may be changed by entering text in the Box field. For the last selected box, an item may be added by entering its name in the Item box, then clicking on the Add button. The choice of item categories is presented in the pop-up list. An existing item may be obtained by entering its name and clicking on the Get button. The obtained item may be changed (Set button) or even removed (Remove button).</p>

<h2 id='steps'>Steps</h2>

<p>Since there is no box number any more, the nextBoxNo property is removed from the Board class.</p>

<p><strong>Code 07-08.01</strong>: The nextBoxNo property is removed from the Board class.</p>
<div class='highlight'><pre><code class='java'>  <span class='kt'>int</span> <span class='n'>get</span> <span class='nf'>nextBoxNo</span><span class='o'>()</span> <span class='o'>=&gt;</span> <span class='n'>boxes</span><span class='o'>.</span><span class='na'>length</span> <span class='o'>+</span> <span class='mi'>1</span><span class='o'>;</span>
</code></pre>
</div>
<p>The Board class has the lastBoxSelected attribute that will be used to change the box name and to add items.</p>

<p><strong>Code 07-08.02</strong>: The lastBoxSelected attribute.</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>Board</span> <span class='o'>{</span>
  <span class='err'>…</span>
  <span class='n'>Box</span> <span class='n'>lastBoxSelected</span><span class='o'>;</span>
</code></pre>
</div>
<p>The printBoxNames method may be used in testing.</p>

<p><strong>Code 07-08.03</strong>: The printBoxNames method of the Board class.</p>
<div class='highlight'><pre><code class='java'>  <span class='kt'>void</span> <span class='nf'>printBoxNames</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='k'>for</span> <span class='o'>(</span><span class='n'>Box</span> <span class='n'>box</span> <span class='n'>in</span> <span class='n'>boxes</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>print</span><span class='o'>(</span><span class='n'>box</span><span class='o'>.</span><span class='na'>title</span><span class='o'>);</span>
    <span class='o'>}</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>When a new box is constructed, its name is Box (without the box number and the position coordinates).</p>

<p><strong>Code 07-08.04</strong>: The private name attribute.</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>Box</span> <span class='o'>{</span>
  <span class='err'>…</span>
  <span class='n'>String</span> <span class='n'>_name</span> <span class='o'>=</span> <span class='err'>&#39;</span><span class='n'>Box</span><span class='err'>&#39;</span><span class='o'>;</span>
</code></pre>
</div>
<p>There are no predefined items.</p>

<p><strong>Code 07-08.05</strong>: The draw method of the Box class.</p>
<div class='highlight'><pre><code class='java'><span class='kt'>void</span> <span class='nf'>draw</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='k'>if</span> <span class='o'>(!</span><span class='n'>isHidden</span><span class='o'>())</span> <span class='o'>{</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>beginPath</span><span class='o'>();</span>
      <span class='err'>…</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>fillText</span><span class='o'>(</span><span class='n'>title</span><span class='o'>,</span> <span class='n'>x</span> <span class='o'>+</span> <span class='n'>TOS</span><span class='o'>,</span> <span class='n'>y</span> <span class='o'>+</span> <span class='n'>TOS</span><span class='o'>,</span> <span class='n'>width</span> <span class='o'>-</span> <span class='n'>TOS</span><span class='o'>);</span>
      <span class='k'>if</span> <span class='o'>(</span><span class='n'>isSelected</span><span class='o'>())</span> <span class='o'>{</span>
        <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='n'>x</span><span class='o'>,</span> <span class='n'>y</span><span class='o'>,</span> <span class='n'>SSS</span><span class='o'>,</span> <span class='n'>SSS</span><span class='o'>);</span>
        <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='n'>x</span> <span class='o'>+</span> <span class='n'>width</span> <span class='o'>-</span> <span class='n'>SSS</span><span class='o'>,</span> <span class='n'>y</span><span class='o'>,</span> <span class='n'>SSS</span><span class='o'>,</span> <span class='n'>SSS</span><span class='o'>);</span>
        <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='n'>x</span> <span class='o'>+</span> <span class='n'>width</span> <span class='o'>-</span> <span class='n'>SSS</span><span class='o'>,</span> <span class='n'>y</span> <span class='o'>+</span> <span class='n'>height</span> <span class='o'>-</span> <span class='n'>SSS</span><span class='o'>,</span> <span class='n'>SSS</span><span class='o'>,</span> <span class='n'>SSS</span><span class='o'>);</span>
        <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>rect</span><span class='o'>(</span><span class='n'>x</span><span class='o'>,</span> <span class='n'>y</span> <span class='o'>+</span> <span class='n'>height</span> <span class='o'>-</span> <span class='n'>SSS</span><span class='o'>,</span> <span class='n'>SSS</span><span class='o'>,</span> <span class='n'>SSS</span><span class='o'>);</span>
      <span class='o'>}</span> 
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>setLineWidth</span><span class='o'>(</span><span class='n'>defaultLineWidth</span><span class='o'>);</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>closePath</span><span class='o'>();</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>stroke</span><span class='o'>();</span>
    <span class='o'>}</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>Note that in the fillText method of the draw method, the title property is used instead of the private name attribute. The property name is title. There are two methods for handling the property. The method with the <strong>set</strong> keyword is used to update the private name attribute. The method with the get keyword is used to rea the property. Since the property uses the private attribute, it is not virtual.</p>

<p><strong>Code 07-08.06</strong>: The title property of the Box class.</p>
<div class='highlight'><pre><code class='java'>  <span class='kt'>void</span> <span class='n'>set</span> <span class='nf'>title</span><span class='o'>(</span><span class='n'>String</span> <span class='n'>name</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='n'>_name</span> <span class='o'>=</span> <span class='n'>name</span><span class='o'>;</span>
  <span class='o'>}</span>
  
  <span class='n'>String</span> <span class='n'>get</span> <span class='nf'>title</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='k'>return</span> <span class='n'>_name</span><span class='o'>;</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>The select, deselect and toggleSelection methods of the Boxclass keep the lastBoxSelected attribute of the Board class up to date.</p>

<p><strong>Code 07-08.07</strong>: Handling of the last box selected.</p>
<div class='highlight'><pre><code class='java'>  <span class='kt'>void</span> <span class='nf'>select</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='n'>_selected</span> <span class='o'>=</span> <span class='kc'>true</span><span class='o'>;</span>
    <span class='n'>board</span><span class='o'>.</span><span class='na'>lastBoxSelected</span> <span class='o'>=</span> <span class='k'>this</span><span class='o'>;</span>
  <span class='o'>}</span>
  
  <span class='kt'>void</span> <span class='nf'>deselect</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='n'>_selected</span> <span class='o'>=</span> <span class='kc'>false</span><span class='o'>;</span>
    <span class='n'>board</span><span class='o'>.</span><span class='na'>lastBoxSelected</span> <span class='o'>=</span> <span class='kc'>null</span><span class='o'>;</span>
  <span class='o'>}</span>
  
  <span class='kt'>void</span> <span class='nf'>toggleSelection</span><span class='o'>()</span> <span class='o'>{</span> 
    <span class='n'>_selected</span> <span class='o'>=</span> <span class='o'>!</span><span class='n'>_selected</span><span class='o'>;</span>
    <span class='k'>if</span> <span class='o'>(</span><span class='n'>_selected</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>lastBoxSelected</span> <span class='o'>=</span> <span class='k'>this</span><span class='o'>;</span>
    <span class='o'>}</span> <span class='k'>else</span> <span class='o'>{</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>lastBoxSelected</span> <span class='o'>=</span> <span class='kc'>null</span><span class='o'>;</span>
    <span class='o'>}</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>The toString method stays in the Box class, but without the use of the box number. The method is not used in the drawing of a box.</p>

<p><strong>Code 07-08.08</strong>: No more box number.</p>
<div class='highlight'><pre><code class='java'>  <span class='n'>String</span> <span class='nf'>toString</span><span class='o'>()</span> <span class='o'>=&gt;</span> <span class='err'>&#39;</span><span class='n'>$title</span> <span class='o'>(</span><span class='n'>$x</span><span class='o'>,</span> <span class='n'>$y</span><span class='o'>)</span><span class='err'>&#39;</span><span class='o'>;</span>
</code></pre>
</div>
<p>The ToolBar class has a new attribute of the InputElement type. This attribute, with the boxNameInput name, will be presented as a field in the tool bar.</p>

<p><strong>Code 07-08.09</strong>: The boxNameInput attribute.</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>ToolBar</span> <span class='o'>{</span>
  <span class='err'>…</span>
  <span class='n'>InputElement</span> <span class='n'>boxNameInput</span><span class='o'>;</span>
</code></pre>
</div>
<p>In the constructor of the ToolBar class, the boxNameInput attribute references the boxName element of the document. There are two not named event methods added to the attribute. When the input element gets focus, its value becomes the title of the last selected box. When a user inputs a new box name, the title of the last box selected becomes the value of the input.</p>

<p><strong>Code 07-08.10</strong>: Two events to handle the box title display and update.</p>
<div class='highlight'><pre><code class='java'>  <span class='n'>ToolBar</span><span class='o'>(</span><span class='k'>this</span><span class='o'>.</span><span class='na'>board</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='err'>…</span> 
    <span class='n'>boxNameInput</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>boxName</span><span class='err'>&#39;</span><span class='o'>);</span>
    <span class='n'>boxNameInput</span><span class='o'>.</span><span class='na'>on</span><span class='o'>.</span><span class='na'>focus</span><span class='o'>.</span><span class='na'>add</span><span class='o'>((</span><span class='n'>Event</span> <span class='n'>e</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>Box</span> <span class='n'>box</span> <span class='o'>=</span> <span class='n'>board</span><span class='o'>.</span><span class='na'>lastBoxSelected</span><span class='o'>;</span>
      <span class='k'>if</span> <span class='o'>(</span><span class='n'>box</span> <span class='o'>!=</span> <span class='kc'>null</span><span class='o'>)</span> <span class='o'>{</span>
        <span class='n'>boxNameInput</span><span class='o'>.</span><span class='na'>value</span> <span class='o'>=</span> <span class='n'>box</span><span class='o'>.</span><span class='na'>title</span><span class='o'>;</span>
      <span class='o'>}</span>
    <span class='o'>});</span>
    <span class='n'>boxNameInput</span><span class='o'>.</span><span class='na'>on</span><span class='o'>.</span><span class='na'>input</span><span class='o'>.</span><span class='na'>add</span><span class='o'>((</span><span class='n'>Event</span> <span class='n'>e</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>Box</span> <span class='n'>box</span> <span class='o'>=</span> <span class='n'>board</span><span class='o'>.</span><span class='na'>lastBoxSelected</span><span class='o'>;</span>
      <span class='k'>if</span> <span class='o'>(</span><span class='n'>box</span> <span class='o'>!=</span> <span class='kc'>null</span><span class='o'>)</span> <span class='o'>{</span>
        <span class='n'>box</span><span class='o'>.</span><span class='na'>title</span> <span class='o'>=</span> <span class='n'>boxNameInput</span><span class='o'>.</span><span class='na'>value</span><span class='o'>;</span>
      <span class='o'>}</span>
    <span class='o'>});</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>The Web page is updated to add a label element with the Box display, and an input element of the text type with the boxName id. This id is referenced by the label (for) and used in programming to make a connection between the input element and the boxNameInput attribute of the InputElement type in the ToolBar class.</p>

<p><strong>Code 07-08.11</strong>: The box name label and input field.</p>
<div class='highlight'><pre><code class='html'>    <span class='nt'>&lt;section&gt;</span> 
      <span class='nt'>&lt;canvas</span> <span class='na'>id=</span><span class='s'>&quot;canvas&quot;</span> <span class='na'>width=</span><span class='s'>&quot;890&quot;</span> <span class='na'>height=</span><span class='s'>&quot;560&quot;</span><span class='nt'>&gt;</span>
        Canvas is not supported in your browser.
      <span class='nt'>&lt;/canvas&gt;</span>
      <span class='nt'>&lt;footer&gt;</span>
        <span class='nt'>&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;select&quot;</span><span class='nt'>&gt;&lt;img</span> <span class='na'>src=</span><span class='s'>&quot;img/select.png&quot;</span><span class='nt'>/&gt;&lt;/button&gt;</span>
        <span class='nt'>&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;box&quot;</span><span class='nt'>&gt;&lt;img</span> <span class='na'>src=</span><span class='s'>&quot;img/box.png&quot;</span><span class='nt'>/&gt;&lt;/button&gt;</span>
        <span class='nt'>&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;line&quot;</span><span class='nt'>&gt;&lt;img</span> <span class='na'>src=</span><span class='s'>&quot;img/line.png&quot;</span><span class='nt'>/&gt;&lt;/button&gt;</span>
        <span class='ni'>&amp;nbsp;</span> <span class='ni'>&amp;nbsp;</span> <span class='ni'>&amp;nbsp;</span> <span class='ni'>&amp;nbsp;</span> <span class='ni'>&amp;nbsp;</span> <span class='ni'>&amp;nbsp;</span> 
        <span class='nt'>&lt;label</span> <span class='na'>for=</span><span class='s'>&quot;boxName&quot;</span><span class='nt'>&gt;</span>Box<span class='nt'>&lt;/label&gt;</span>
        <span class='nt'>&lt;input</span> <span class='na'>type=</span><span class='s'>&quot;text&quot;</span> <span class='na'>id=</span><span class='s'>&quot;boxName&quot;</span><span class='nt'>/&gt;</span>
      <span class='nt'>&lt;/footer&gt;</span>
      <span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;application/dart&quot;</span> <span class='na'>src=</span><span class='s'>&quot;mb.dart&quot;</span><span class='nt'>&gt;&lt;/script&gt;</span>
      <span class='nt'>&lt;script</span>
<span class='nt'>        </span><span class='na'>src=</span><span class='s'>&quot;http://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js&quot;</span><span class='nt'>&gt;</span>
      <span class='nt'>&lt;/script&gt;</span>
    <span class='nt'>&lt;/section&gt;</span>
</code></pre>
</div>
<p>Note the change in the script element.</p>

<p>Two boxes with one line are created in Figure 07-08.02. Inittially, both boxes have the Box name. The first box is selected and its name is changed from Box to Project. Then, the second box is selected and its name is changed from Box to Task.</p>

<p><img src='/img/s07s08/BoxNames.png' alt='Alt Figure 07-08.02: Boxes may have names' /></p>

<p><strong>Figure 07-08.02</strong>: Boxes may have names.</p>

<p>The size of a box increased from 100 by 100 pixels to 120 by 120 pixels.</p>

<p><strong>Code 07-08.12</strong>: The box size increase.</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>Box</span> <span class='o'>{</span>
  
  <span class='kd'>static</span> <span class='kd'>final</span> <span class='kt'>int</span> <span class='n'>DEFAULT_WIDTH</span> <span class='o'>=</span> <span class='mi'>120</span><span class='o'>;</span>
  <span class='kd'>static</span> <span class='kd'>final</span> <span class='kt'>int</span> <span class='n'>DEFAULT_HEIGHT</span> <span class='o'>=</span> <span class='mi'>120</span><span class='o'>;</span>
</code></pre>
</div>
<p>The box size is increased to accommodate user entered items (Figure 07-08.03).</p>

<p><img src='/img/s07s08/ItemNames.png' alt='Alt Figure 07-08.03: User entered item names' /></p>

<p><strong>Figure 07-08.03</strong>: User entered item names.</p>

<p>For the last selected box, an item may be added by entering its name in the Item box, then clicking on the Add button. A box may be seen as a concept (an entity) in modeling. Consequently, a box item may be considered as an attribute of the concept. A line between two boxes, may be considered as a relationship between two concepts.</p>

<p>Note that a line is covered by its boxes. Two simple changes enabled this desirable feature. In the redraw method of the Board class, the sequence of drawing is changed. Boxes are drawn after all lines are drawn.</p>

<p><strong>Code 07-08.13</strong>: Lines are drawn before boxes.</p>
<div class='highlight'><pre><code class='java'>  <span class='kt'>void</span> <span class='nf'>redraw</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='n'>clear</span><span class='o'>();</span> 
    <span class='k'>for</span> <span class='o'>(</span><span class='n'>Line</span> <span class='n'>line</span> <span class='n'>in</span> <span class='n'>lines</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>line</span><span class='o'>.</span><span class='na'>draw</span><span class='o'>();</span>
    <span class='o'>}</span>
    <span class='k'>for</span> <span class='o'>(</span><span class='n'>Box</span> <span class='n'>box</span> <span class='n'>in</span> <span class='n'>boxes</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>box</span><span class='o'>.</span><span class='na'>draw</span><span class='o'>();</span>
    <span class='o'>}</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>In the draw method of the Box class, before a box is drawn its rectangle is cleared, removing everything that has already been drawn within the box.</p>

<p><strong>Code 07-08.14</strong>: Box rectangle is cleared first.</p>
<div class='highlight'><pre><code class='java'><span class='kt'>void</span> <span class='nf'>draw</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='k'>if</span> <span class='o'>(!</span><span class='n'>isHidden</span><span class='o'>())</span> <span class='o'>{</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>beginPath</span><span class='o'>();</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>clearRect</span><span class='o'>(</span><span class='n'>x</span><span class='o'>,</span> <span class='n'>y</span><span class='o'>,</span> <span class='n'>width</span><span class='o'>,</span> <span class='n'>height</span><span class='o'>);</span>
      <span class='err'>…</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>closePath</span><span class='o'>();</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>stroke</span><span class='o'>();</span>
    <span class='o'>}</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>The Box class has the items attribute of the List type.</p>

<p><strong>Code 07-08.15</strong>: The items attribute.</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>Box</span> <span class='o'>{</span>
  <span class='err'>…</span>
  <span class='n'>List</span><span class='o'>&lt;</span><span class='n'>Item</span><span class='o'>&gt;</span> <span class='n'>items</span><span class='o'>;</span>
  <span class='err'>…</span>
  <span class='n'>Box</span><span class='o'>(</span><span class='k'>this</span><span class='o'>.</span><span class='na'>board</span><span class='o'>,</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>x</span><span class='o'>,</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span><span class='o'>,</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>width</span><span class='o'>,</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>height</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='err'>…</span>
    <span class='n'>items</span> <span class='o'>=</span> <span class='k'>new</span> <span class='n'>List</span><span class='o'>();</span>
    <span class='err'>…</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>A list of items can accept only objects of the new Item class.</p>

<p><strong>Code 07-08.16</strong>: The Item class.</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>Item</span> <span class='o'>{</span>
  
  <span class='kd'>final</span> <span class='n'>Box</span> <span class='n'>box</span><span class='o'>;</span>
  
  <span class='n'>String</span> <span class='n'>name</span><span class='o'>;</span>
  
  <span class='n'>Item</span><span class='o'>(</span><span class='k'>this</span><span class='o'>.</span><span class='na'>box</span><span class='o'>,</span> <span class='n'>String</span> <span class='n'>name</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='k'>this</span><span class='o'>.</span><span class='na'>name</span> <span class='o'>=</span> <span class='n'>name</span><span class='o'>;</span>
    <span class='n'>box</span><span class='o'>.</span><span class='na'>items</span><span class='o'>.</span><span class='na'>add</span><span class='o'>(</span><span class='k'>this</span><span class='o'>);</span>
  <span class='o'>}</span>

<span class='o'>}</span>
</code></pre>
</div>
<p>The Item class has two attributes: box and name. The box attribute references the parent container of the current item. The name attribute is the item name and is of the String type. In the constructor of the Item class, the shortcut notation is used for the box parameter, while the regular notation is used for the name parameter. In this regular notation, the <strong>this</strong> keyword is used to make a distinction between the name attribute and the name parameter, because they have the same name. The shortcut notation should have been used also for the name parameter.</p>

<p>The current item, represented by this, is added to the items attribute of the box attribute, which references the item’s box.</p>

<p>Within a box, items that are members of the items attribute are drawn by the draw method of the Box class.</p>

<p><strong>Code 07-08.17</strong>: Items are drawn within the for loop.</p>
<div class='highlight'><pre><code class='java'>  <span class='kt'>void</span> <span class='nf'>draw</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='k'>if</span> <span class='o'>(!</span><span class='n'>isHidden</span><span class='o'>())</span> <span class='o'>{</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>beginPath</span><span class='o'>();</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>clearRect</span><span class='o'>(</span><span class='n'>x</span><span class='o'>,</span> <span class='n'>y</span><span class='o'>,</span> <span class='n'>width</span><span class='o'>,</span> <span class='n'>height</span><span class='o'>);</span>
      <span class='err'>…</span>
      <span class='kt'>int</span> <span class='n'>i</span> <span class='o'>=</span> <span class='mi'>0</span><span class='o'>;</span>
      <span class='k'>for</span> <span class='o'>(</span><span class='n'>Item</span> <span class='n'>item</span> <span class='n'>in</span> <span class='n'>items</span><span class='o'>)</span> <span class='o'>{</span>
        <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>font</span> <span class='o'>=</span> <span class='err'>&#39;&#39;</span> <span class='o'>+</span> <span class='n'>textFontSize</span> <span class='o'>+</span> <span class='err'>&#39;</span><span class='n'>px</span> <span class='n'>sans</span><span class='o'>-</span><span class='n'>serif</span><span class='err'>&#39;</span><span class='o'>;</span>
        <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>fillText</span><span class='o'>(</span><span class='n'>item</span><span class='o'>.</span><span class='na'>name</span><span class='o'>,</span> <span class='n'>x</span> <span class='o'>+</span> <span class='n'>TOS</span><span class='o'>,</span> <span class='n'>y</span> <span class='o'>+</span> <span class='n'>TOS</span> <span class='o'>+</span> <span class='n'>TBH</span> <span class='o'>+</span> <span class='n'>i</span> <span class='o'>*</span> <span class='n'>IOS</span><span class='o'>,</span> 
          <span class='n'>width</span> <span class='o'>-</span> <span class='n'>TOS</span><span class='o'>);</span>
        <span class='n'>i</span><span class='o'>++;</span>
      <span class='o'>}</span>
      <span class='err'>…</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>closePath</span><span class='o'>();</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>stroke</span><span class='o'>();</span>
    <span class='o'>}</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>The x and y coordinates of an item are determined by its sequential position within the box with the help of constants.</p>

<p>The item name input and the add item button elements are added as the new attributes of the ToolBar class immediately after the box name input element.</p>

<p><strong>Code 07-08.18</strong>: Item input element.</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>ToolBar</span> <span class='o'>{</span>
  <span class='err'>…</span>
  <span class='n'>InputElement</span> <span class='n'>boxNameInput</span><span class='o'>;</span>
  <span class='n'>InputElement</span> <span class='n'>itemNameInput</span><span class='o'>;</span>
  <span class='n'>ButtonElement</span> <span class='n'>addItemButton</span><span class='o'>;</span>
</code></pre>
</div>
<p>In the constructor of the ToolBar class, the query method is used to find the corresponding elements in the document. The click event is linked to the add button. For the last selected box, the new item is constructed and a value entered by a user is selected in the Item field. The new item is linked to its box by its constructor.</p>

<p><strong>Code 07-08.19</strong>: Adding a new item.</p>
<div class='highlight'><pre><code class='java'>  <span class='n'>ToolBar</span><span class='o'>(</span><span class='k'>this</span><span class='o'>.</span><span class='na'>board</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='err'>…</span> 
    <span class='n'>itemNameInput</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>itemName</span><span class='err'>&#39;</span><span class='o'>);</span>
    
    <span class='n'>addItemButton</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>addItem</span><span class='err'>&#39;</span><span class='o'>);</span>
    <span class='n'>addItemButton</span><span class='o'>.</span><span class='na'>on</span><span class='o'>.</span><span class='na'>click</span><span class='o'>.</span><span class='na'>add</span><span class='o'>((</span><span class='n'>MouseEvent</span> <span class='n'>e</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>Box</span> <span class='n'>box</span> <span class='o'>=</span> <span class='n'>board</span><span class='o'>.</span><span class='na'>lastBoxSelected</span><span class='o'>;</span>
      <span class='k'>if</span> <span class='o'>(</span><span class='n'>box</span> <span class='o'>!=</span> <span class='kc'>null</span><span class='o'>)</span> <span class='o'>{</span>
        <span class='k'>new</span> <span class='nf'>Item</span><span class='o'>(</span><span class='n'>box</span><span class='o'>,</span> <span class='n'>itemNameInput</span><span class='o'>.</span><span class='na'>value</span><span class='o'>);</span>
        <span class='n'>itemNameInput</span><span class='o'>.</span><span class='na'>select</span><span class='o'>();</span>
      <span class='o'>}</span>
    <span class='o'>});</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>In the mb.html file, three elements are added for a new item: a label with the Item text, an input with the itemName id used in the constructor of the ToolBar class, and a button with the addItem id.</p>

<p><strong>Code 07-08.20</strong>: Label, input and button elements for an item.</p>
<div class='highlight'><pre><code class='html'>    <span class='nt'>&lt;section&gt;</span> 
      …
      <span class='nt'>&lt;footer&gt;</span>
        …
        <span class='nt'>&lt;label</span> <span class='na'>for=</span><span class='s'>&quot;boxName&quot;</span><span class='nt'>&gt;</span>Box<span class='nt'>&lt;/label&gt;</span>
        <span class='nt'>&lt;input</span> <span class='na'>type=</span><span class='s'>&quot;text&quot;</span> <span class='na'>id=</span><span class='s'>&quot;boxName&quot;</span><span class='nt'>/&gt;</span>
        <span class='nt'>&lt;label</span> <span class='na'>for=</span><span class='s'>&quot;itemName&quot;</span><span class='nt'>&gt;</span>Item<span class='nt'>&lt;/label&gt;</span>
        <span class='nt'>&lt;input</span> <span class='na'>type=</span><span class='s'>&quot;text&quot;</span> <span class='na'>id=</span><span class='s'>&quot;itemName&quot;</span><span class='nt'>/&gt;</span>
        <span class='nt'>&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;addItem&quot;</span><span class='nt'>&gt;</span>Add<span class='nt'>&lt;/button&gt;</span>
      <span class='nt'>&lt;/footer&gt;</span>
      …
    <span class='nt'>&lt;/section&gt;</span>
</code></pre>
</div>
<p>In the Box class, there are two new methods to find and remove an item.</p>

<p><strong>Code 07-08.21</strong>: Find and remove item.</p>
<div class='highlight'><pre><code class='java'>  <span class='n'>Item</span> <span class='nf'>findItem</span><span class='o'>(</span><span class='n'>String</span> <span class='n'>name</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='k'>for</span> <span class='o'>(</span><span class='n'>Item</span> <span class='n'>item</span> <span class='n'>in</span> <span class='n'>items</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='k'>if</span> <span class='o'>(</span><span class='n'>item</span><span class='o'>.</span><span class='na'>name</span> <span class='o'>==</span> <span class='n'>name</span><span class='o'>)</span> <span class='o'>{</span>
        <span class='k'>return</span> <span class='n'>item</span><span class='o'>;</span>
      <span class='o'>}</span>
    <span class='o'>}</span>
    <span class='k'>return</span> <span class='kc'>null</span><span class='o'>;</span>
  <span class='o'>}</span> 
  
  <span class='n'>bool</span> <span class='nf'>removeItem</span><span class='o'>(</span><span class='n'>Item</span> <span class='n'>item</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='k'>if</span> <span class='o'>(</span><span class='n'>item</span> <span class='o'>!=</span> <span class='kc'>null</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='kt'>int</span> <span class='n'>index</span> <span class='o'>=</span> <span class='n'>items</span><span class='o'>.</span><span class='na'>indexOf</span><span class='o'>(</span><span class='n'>item</span><span class='o'>,</span> <span class='mi'>0</span><span class='o'>);</span>
      <span class='k'>if</span> <span class='o'>(</span><span class='n'>index</span> <span class='o'>&gt;=</span> <span class='mi'>0</span><span class='o'>)</span> <span class='o'>{</span>
        <span class='n'>items</span><span class='o'>.</span><span class='na'>removeRange</span><span class='o'>(</span><span class='n'>index</span><span class='o'>,</span> <span class='mi'>1</span><span class='o'>);</span>
        <span class='k'>return</span> <span class='kc'>true</span><span class='o'>;</span>
      <span class='o'>}</span>
    <span class='o'>}</span>
    <span class='k'>return</span> <span class='kc'>false</span><span class='o'>;</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>The ToolBar class has four new attributes.</p>

<p><strong>Code 07-08.22</strong>: Get, set and remove item buttons and the current item.</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>ToolBar</span> <span class='o'>{</span>
  <span class='err'>…</span>
  <span class='n'>ButtonElement</span> <span class='n'>getItemButton</span><span class='o'>;</span>
  <span class='n'>ButtonElement</span> <span class='n'>setItemButton</span><span class='o'>;</span>
  <span class='n'>ButtonElement</span> <span class='n'>removeItemButton</span><span class='o'>;</span>
  
  <span class='n'>Item</span> <span class='n'>currentItem</span><span class='o'>;</span>
</code></pre>
</div>
<p>In the constructor of the ToolBar class, reactions to clicks on the get, set and remove buttons are defined.</p>

<p><strong>Code 07-08.23</strong>: Get, set and remove item events.</p>
<div class='highlight'><pre><code class='java'>  <span class='n'>ToolBar</span><span class='o'>(</span><span class='k'>this</span><span class='o'>.</span><span class='na'>board</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='err'>…</span>
    <span class='n'>getItemButton</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>getItem</span><span class='err'>&#39;</span><span class='o'>);</span>
    <span class='n'>getItemButton</span><span class='o'>.</span><span class='na'>on</span><span class='o'>.</span><span class='na'>click</span><span class='o'>.</span><span class='na'>add</span><span class='o'>((</span><span class='n'>MouseEvent</span> <span class='n'>e</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>Box</span> <span class='n'>box</span> <span class='o'>=</span> <span class='n'>board</span><span class='o'>.</span><span class='na'>lastBoxSelected</span><span class='o'>;</span>
      <span class='k'>if</span> <span class='o'>(</span><span class='n'>box</span> <span class='o'>!=</span> <span class='kc'>null</span><span class='o'>)</span> <span class='o'>{</span>
        <span class='n'>Item</span> <span class='n'>item</span> <span class='o'>=</span> <span class='n'>box</span><span class='o'>.</span><span class='na'>findItem</span><span class='o'>(</span><span class='n'>itemNameInput</span><span class='o'>.</span><span class='na'>value</span><span class='o'>);</span>
        <span class='k'>if</span> <span class='o'>(</span><span class='n'>item</span> <span class='o'>!=</span> <span class='kc'>null</span><span class='o'>)</span> <span class='o'>{</span>
          <span class='n'>currentItem</span> <span class='o'>=</span> <span class='n'>item</span><span class='o'>;</span>
          <span class='n'>itemNameInput</span><span class='o'>.</span><span class='na'>value</span> <span class='o'>=</span> <span class='n'>item</span><span class='o'>.</span><span class='na'>name</span><span class='o'>;</span>
          <span class='n'>itemNameInput</span><span class='o'>.</span><span class='na'>select</span><span class='o'>();</span>
        <span class='o'>}</span> <span class='k'>else</span> <span class='o'>{</span>
          <span class='n'>currentItem</span> <span class='o'>=</span> <span class='kc'>null</span><span class='o'>;</span>
        <span class='o'>}</span>
      <span class='o'>}</span>
    <span class='o'>});</span>
    
    <span class='n'>setItemButton</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>setItem</span><span class='err'>&#39;</span><span class='o'>);</span>
    <span class='n'>setItemButton</span><span class='o'>.</span><span class='na'>on</span><span class='o'>.</span><span class='na'>click</span><span class='o'>.</span><span class='na'>add</span><span class='o'>((</span><span class='n'>MouseEvent</span> <span class='n'>e</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>Box</span> <span class='n'>box</span> <span class='o'>=</span> <span class='n'>board</span><span class='o'>.</span><span class='na'>lastBoxSelected</span><span class='o'>;</span>
      <span class='k'>if</span> <span class='o'>(</span><span class='n'>box</span> <span class='o'>!=</span> <span class='kc'>null</span><span class='o'>)</span> <span class='o'>{</span>
        <span class='k'>if</span> <span class='o'>(</span><span class='n'>currentItem</span> <span class='o'>!=</span> <span class='kc'>null</span><span class='o'>)</span> <span class='o'>{</span>
          <span class='n'>currentItem</span><span class='o'>.</span><span class='na'>name</span> <span class='o'>=</span> <span class='n'>itemNameInput</span><span class='o'>.</span><span class='na'>value</span><span class='o'>;</span>
          <span class='n'>itemNameInput</span><span class='o'>.</span><span class='na'>select</span><span class='o'>();</span>
        <span class='o'>}</span>
      <span class='o'>}</span>
    <span class='o'>});</span>
    
    <span class='n'>removeItemButton</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>removeItem</span><span class='err'>&#39;</span><span class='o'>);</span>
    <span class='n'>removeItemButton</span><span class='o'>.</span><span class='na'>on</span><span class='o'>.</span><span class='na'>click</span><span class='o'>.</span><span class='na'>add</span><span class='o'>((</span><span class='n'>MouseEvent</span> <span class='n'>e</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>Box</span> <span class='n'>box</span> <span class='o'>=</span> <span class='n'>board</span><span class='o'>.</span><span class='na'>lastBoxSelected</span><span class='o'>;</span>
      <span class='k'>if</span> <span class='o'>(</span><span class='n'>box</span> <span class='o'>!=</span> <span class='kc'>null</span><span class='o'>)</span> <span class='o'>{</span>
        <span class='k'>if</span> <span class='o'>(</span><span class='n'>currentItem</span> <span class='o'>!=</span> <span class='kc'>null</span><span class='o'>)</span> <span class='o'>{</span>
          <span class='k'>if</span> <span class='o'>(</span><span class='n'>box</span><span class='o'>.</span><span class='na'>removeItem</span><span class='o'>(</span><span class='n'>currentItem</span><span class='o'>))</span> <span class='o'>{</span>
            <span class='n'>currentItem</span> <span class='o'>=</span> <span class='kc'>null</span><span class='o'>;</span>
            <span class='n'>itemNameInput</span><span class='o'>.</span><span class='na'>value</span> <span class='o'>=</span> <span class='err'>&#39;&#39;</span><span class='o'>;</span>
          <span class='o'>}</span>
        <span class='o'>}</span>
      <span class='o'>}</span>
    <span class='o'>});</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>In the footer of the Web page, the button elements, with their ids used in the constructor of the ToolBar class, are added.</p>

<p><strong>Code 07-08.24</strong>: Get, set and remove item buttons.</p>
<div class='highlight'><pre><code class='html'>    <span class='nt'>&lt;section&gt;</span> 
      …
      <span class='nt'>&lt;footer&gt;</span>
        …
        <span class='nt'>&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;getItem&quot;</span><span class='nt'>&gt;</span>Get<span class='nt'>&lt;/button&gt;</span>
        <span class='nt'>&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;setItem&quot;</span><span class='nt'>&gt;</span>Set<span class='nt'>&lt;/button&gt;</span>
        <span class='nt'>&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;removeItem&quot;</span><span class='nt'>&gt;</span>Remove<span class='nt'>&lt;/button&gt;</span>
      <span class='nt'>&lt;/footer&gt;</span>
      …
    <span class='nt'>&lt;/section&gt;</span>
</code></pre>
</div>
<p>An existing item may be obtained by entering its name and clicking on the Get button. The item name may be changed by the Set button or deleted by the Remove button (Figure 07-08.04).</p>

<p><img src='/img/s07s08/ItemNameChange.png' alt='Alt Figure 07-08.04: Updating an item name' /></p>

<p><strong>Figure 07-08.04</strong>: Updating an item name.</p>

<p>An item has a category.</p>

<p><strong>Code 07-08.25</strong>: The item category.</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>Item</span> <span class='o'>{</span>
  
  <span class='kd'>final</span> <span class='n'>Box</span> <span class='n'>box</span><span class='o'>;</span>
  
  <span class='n'>String</span> <span class='n'>name</span><span class='o'>;</span>
  <span class='n'>String</span> <span class='n'>category</span><span class='o'>;</span>
  
  <span class='n'>Item</span><span class='o'>(</span><span class='k'>this</span><span class='o'>.</span><span class='na'>box</span><span class='o'>,</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>name</span><span class='o'>,</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>category</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='n'>box</span><span class='o'>.</span><span class='na'>items</span><span class='o'>.</span><span class='na'>add</span><span class='o'>(</span><span class='k'>this</span><span class='o'>);</span>
  <span class='o'>}</span>

<span class='o'>}</span>
</code></pre>
</div>
<p>The item category is represented in the Web page (Figure 07-08.05) as a select element (pop-up list). By default, an item is an attribute. In addition, it may be declared as guid (globally unique identifier&#8211;not significant to a user), identifier (significant to a user) or required (mandatory value).</p>

<p><strong>Code 07-08.26</strong>: The select element with the itemCategory id.</p>
<div class='highlight'><pre><code class='html'>    <span class='nt'>&lt;section&gt;</span> 
      …
      <span class='nt'>&lt;footer&gt;</span>
        … 
        <span class='nt'>&lt;label</span> <span class='na'>for=</span><span class='s'>&quot;boxName&quot;</span><span class='nt'>&gt;</span>Box<span class='nt'>&lt;/label&gt;</span>
        <span class='nt'>&lt;input</span> <span class='na'>type=</span><span class='s'>&quot;text&quot;</span> <span class='na'>id=</span><span class='s'>&quot;boxName&quot;</span><span class='nt'>/&gt;</span>
        <span class='nt'>&lt;label</span> <span class='na'>for=</span><span class='s'>&quot;itemName&quot;</span><span class='nt'>&gt;</span>Item<span class='nt'>&lt;/label&gt;</span>
        <span class='nt'>&lt;input</span> <span class='na'>type=</span><span class='s'>&quot;text&quot;</span> <span class='na'>id=</span><span class='s'>&quot;itemName&quot;</span><span class='nt'>/&gt;</span>
        <span class='nt'>&lt;select</span> <span class='na'>id=</span><span class='s'>&quot;itemCategory&quot;</span><span class='nt'>&gt;</span>
          <span class='nt'>&lt;option&gt;</span>attribute<span class='nt'>&lt;/option&gt;</span>
          <span class='nt'>&lt;option&gt;</span>guid<span class='nt'>&lt;/option&gt;</span>
          <span class='nt'>&lt;option&gt;</span>identifier<span class='nt'>&lt;/option&gt;</span>
          <span class='nt'>&lt;option&gt;</span>required<span class='nt'>&lt;/option&gt;</span>
        <span class='nt'>&lt;/select&gt;</span>
        <span class='nt'>&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;addItem&quot;</span><span class='nt'>&gt;</span>Add<span class='nt'>&lt;/button&gt;</span>
        <span class='nt'>&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;getItem&quot;</span><span class='nt'>&gt;</span>Get<span class='nt'>&lt;/button&gt;</span>
        <span class='nt'>&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;setItem&quot;</span><span class='nt'>&gt;</span>Set<span class='nt'>&lt;/button&gt;</span>
        <span class='nt'>&lt;button</span> <span class='na'>id=</span><span class='s'>&quot;removeItem&quot;</span><span class='nt'>&gt;</span>Remove<span class='nt'>&lt;/button&gt;</span>
      <span class='nt'>&lt;/footer&gt;</span>
      …
    <span class='nt'>&lt;/section&gt;</span>
</code></pre>
</div>
<p><img src='/img/s07s08/ModelConceptAttribute.png' alt='Alt Figure 07-08.05: Selecting an item category' /></p>

<p><strong>Figure 07-08.05</strong>: Selecting an item category.</p>

<p>The ToolBar class has the itemOption attribute of the OptionElement type.</p>

<p><strong>Code 07-08.27</strong>: The item option (category).</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>ToolBar</span> <span class='o'>{</span>
  <span class='err'>…</span>
  <span class='n'>InputElement</span> <span class='n'>boxNameInput</span><span class='o'>;</span>
  <span class='n'>InputElement</span> <span class='n'>itemNameInput</span><span class='o'>;</span>
  <span class='n'>OptionElement</span> <span class='n'>itemOption</span><span class='o'>;</span>
</code></pre>
</div>
<p>The itemOption attribute gets its value from the query method of the document. After a click on the add button, the new item becomes the current item.</p>

<p><strong>Code 07-08.28</strong>: The constructor of the ToolBar class.</p>
<div class='highlight'><pre><code class='java'>  <span class='n'>ToolBar</span><span class='o'>(</span><span class='k'>this</span><span class='o'>.</span><span class='na'>board</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='err'>…</span>
    <span class='n'>itemOption</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>itemCategory</span><span class='err'>&#39;</span><span class='o'>);</span>
    
    <span class='n'>addItemButton</span> <span class='o'>=</span> <span class='n'>document</span><span class='o'>.</span><span class='na'>query</span><span class='o'>(</span><span class='err'>&#39;#</span><span class='n'>addItem</span><span class='err'>&#39;</span><span class='o'>);</span>
    <span class='n'>addItemButton</span><span class='o'>.</span><span class='na'>on</span><span class='o'>.</span><span class='na'>click</span><span class='o'>.</span><span class='na'>add</span><span class='o'>((</span><span class='n'>MouseEvent</span> <span class='n'>e</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>Box</span> <span class='n'>box</span> <span class='o'>=</span> <span class='n'>board</span><span class='o'>.</span><span class='na'>lastBoxSelected</span><span class='o'>;</span>
      <span class='k'>if</span> <span class='o'>(</span><span class='n'>box</span> <span class='o'>!=</span> <span class='kc'>null</span><span class='o'>)</span> <span class='o'>{</span>
        <span class='n'>currentItem</span> <span class='o'>=</span> <span class='k'>new</span> <span class='n'>Item</span><span class='o'>(</span><span class='n'>box</span><span class='o'>,</span> <span class='n'>itemNameInput</span><span class='o'>.</span><span class='na'>value</span><span class='o'>,</span> <span class='n'>itemOption</span><span class='o'>.</span><span class='na'>value</span><span class='o'>);</span>
        <span class='n'>itemNameInput</span><span class='o'>.</span><span class='na'>select</span><span class='o'>();</span>
      <span class='o'>}</span>
    <span class='o'>});</span>
    <span class='err'>…</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>Items are displayed differently based on their categories.</p>

<p><strong>Code 07-08.29</strong>: An item display in the draw method of the Box class.</p>
<div class='highlight'><pre><code class='java'><span class='k'>for</span> <span class='o'>(</span><span class='n'>Item</span> <span class='n'>item</span> <span class='n'>in</span> <span class='n'>items</span><span class='o'>)</span> <span class='o'>{</span>
        <span class='k'>if</span> <span class='o'>(</span><span class='n'>item</span><span class='o'>.</span><span class='na'>category</span> <span class='o'>==</span> <span class='err'>&#39;</span><span class='n'>attribute</span><span class='err'>&#39;</span><span class='o'>)</span> <span class='o'>{</span>
          <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>font</span> <span class='o'>=</span> <span class='err'>&#39;&#39;</span> <span class='o'>+</span> <span class='n'>textFontSize</span> <span class='o'>+</span> <span class='err'>&#39;</span><span class='n'>px</span> <span class='n'>sans</span><span class='o'>-</span><span class='n'>serif</span><span class='err'>&#39;</span><span class='o'>;</span>
          <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>fillText</span><span class='o'>(</span><span class='n'>item</span><span class='o'>.</span><span class='na'>name</span><span class='o'>,</span> <span class='n'>x</span> <span class='o'>+</span> <span class='n'>TOS</span><span class='o'>,</span> <span class='n'>y</span> <span class='o'>+</span> <span class='n'>TOS</span> <span class='o'>+</span> <span class='n'>TBH</span> <span class='o'>+</span> <span class='n'>i</span> <span class='o'>*</span> <span class='n'>IOS</span><span class='o'>,</span> 
            <span class='n'>width</span> <span class='o'>-</span> <span class='n'>TOS</span><span class='o'>);</span>
        <span class='o'>}</span> <span class='k'>else</span> <span class='k'>if</span> <span class='o'>(</span><span class='n'>item</span><span class='o'>.</span><span class='na'>category</span> <span class='o'>==</span> <span class='err'>&#39;</span><span class='n'>guid</span><span class='err'>&#39;</span><span class='o'>)</span> <span class='o'>{</span>
          <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>font</span> <span class='o'>=</span> <span class='err'>&#39;</span><span class='n'>italic</span> <span class='err'>&#39;</span> <span class='o'>+</span> <span class='n'>textFontSize</span> <span class='o'>+</span> <span class='err'>&#39;</span><span class='n'>px</span> <span class='n'>sans</span><span class='o'>-</span><span class='n'>serif</span><span class='err'>&#39;</span><span class='o'>;</span>
          <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>fillText</span><span class='o'>(</span><span class='n'>item</span><span class='o'>.</span><span class='na'>name</span><span class='o'>,</span> <span class='n'>x</span> <span class='o'>+</span> <span class='n'>TOS</span><span class='o'>,</span> <span class='n'>y</span> <span class='o'>+</span> <span class='n'>TOS</span> <span class='o'>+</span> <span class='n'>TBH</span> <span class='o'>+</span> <span class='n'>i</span> <span class='o'>*</span> <span class='n'>IOS</span><span class='o'>,</span> 
            <span class='n'>width</span> <span class='o'>-</span> <span class='n'>TOS</span><span class='o'>);</span>
        <span class='o'>}</span> <span class='k'>else</span> <span class='k'>if</span> <span class='o'>(</span><span class='n'>item</span><span class='o'>.</span><span class='na'>category</span> <span class='o'>==</span> <span class='err'>&#39;</span><span class='n'>identifier</span><span class='err'>&#39;</span><span class='o'>)</span> <span class='o'>{</span>
          <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>font</span> <span class='o'>=</span> <span class='err'>&#39;</span><span class='n'>bold</span> <span class='n'>italic</span> <span class='err'>&#39;</span> <span class='o'>+</span> <span class='n'>textFontSize</span> <span class='o'>+</span> <span class='err'>&#39;</span><span class='n'>px</span> <span class='n'>sans</span><span class='o'>-</span><span class='n'>serif</span><span class='err'>&#39;</span><span class='o'>;</span>
          <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>fillText</span><span class='o'>(</span><span class='n'>item</span><span class='o'>.</span><span class='na'>name</span><span class='o'>,</span> <span class='n'>x</span> <span class='o'>+</span> <span class='n'>TOS</span><span class='o'>,</span> <span class='n'>y</span> <span class='o'>+</span> <span class='n'>TOS</span> <span class='o'>+</span> <span class='n'>TBH</span> <span class='o'>+</span> <span class='n'>i</span> <span class='o'>*</span> <span class='n'>IOS</span><span class='o'>,</span> 
            <span class='n'>width</span> <span class='o'>-</span> <span class='n'>TOS</span><span class='o'>);</span>
        <span class='o'>}</span> <span class='k'>else</span> <span class='k'>if</span> <span class='o'>(</span><span class='n'>item</span><span class='o'>.</span><span class='na'>category</span> <span class='o'>==</span> <span class='err'>&#39;</span><span class='n'>required</span><span class='err'>&#39;</span><span class='o'>)</span> <span class='o'>{</span>
          <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>font</span> <span class='o'>=</span> <span class='err'>&#39;</span><span class='n'>bold</span> <span class='err'>&#39;</span> <span class='o'>+</span> <span class='n'>textFontSize</span> <span class='o'>+</span> <span class='err'>&#39;</span><span class='n'>px</span> <span class='n'>sans</span><span class='o'>-</span><span class='n'>serif</span><span class='err'>&#39;</span><span class='o'>;</span>
          <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>fillText</span><span class='o'>(</span><span class='n'>item</span><span class='o'>.</span><span class='na'>name</span><span class='o'>,</span> <span class='n'>x</span> <span class='o'>+</span> <span class='n'>TOS</span><span class='o'>,</span> <span class='n'>y</span> <span class='o'>+</span> <span class='n'>TOS</span> <span class='o'>+</span> <span class='n'>TBH</span> <span class='o'>+</span> <span class='n'>i</span> <span class='o'>*</span> <span class='n'>IOS</span><span class='o'>,</span> 
            <span class='n'>width</span> <span class='o'>-</span> <span class='n'>TOS</span><span class='o'>);</span>
        <span class='o'>}</span>
        <span class='n'>i</span><span class='o'>++;</span>
      <span class='o'>}</span>
</code></pre>
</div>
<p>The Line class has new attributes for min and max cardinalities in both directions – from box1 to box2 and from box2 to box1.</p>

<p><strong>Code 07-08.30</strong>: Line cardinalities.</p>
<div class='highlight'><pre><code class='java'><span class='kd'>class</span> <span class='nc'>Line</span> <span class='o'>{</span>
  
  <span class='kd'>final</span> <span class='n'>Board</span> <span class='n'>board</span><span class='o'>;</span>
  
  <span class='n'>Box</span> <span class='n'>box1</span><span class='o'>;</span> <span class='c1'>// line begin box</span>
  <span class='n'>Box</span> <span class='n'>box2</span><span class='o'>;</span> <span class='c1'>// line end box</span>
  
  <span class='n'>String</span> <span class='n'>box1box2Min</span><span class='o'>;</span> <span class='c1'>// min cardinality from box1 to box2</span>
  <span class='n'>String</span> <span class='n'>box1box2Max</span><span class='o'>;</span> <span class='c1'>// max cardinality from box1 to box2</span>
  
  <span class='n'>String</span> <span class='n'>box2box1Min</span><span class='o'>;</span> <span class='c1'>// min cardinality from box2 to box1</span>
  <span class='n'>String</span> <span class='n'>box2box1Max</span><span class='o'>;</span> <span class='c1'>// max cardinality from box2 to box1</span>
  
  <span class='n'>bool</span> <span class='n'>_selected</span> <span class='o'>=</span> <span class='kc'>false</span><span class='o'>;</span>
  <span class='n'>bool</span> <span class='n'>_hidden</span> <span class='o'>=</span> <span class='kc'>false</span><span class='o'>;</span>
  
  <span class='n'>String</span> <span class='n'>textFontSize</span> <span class='o'>=</span> <span class='mi'>12</span><span class='o'>;</span>
  <span class='n'>num</span> <span class='n'>defaultLineWidth</span><span class='o'>;</span>
</code></pre>
</div>
<p>The cardinalities are initialized in the constructor of the Line class. The box1 parameter represents a parent and the box2 parameter a child. A parent has from 0 to N children, and a child has one and only one parent.</p>

<p><strong>Code 07-08.31</strong>: The Line class constructor.</p>
<div class='highlight'><pre><code class='java'>  <span class='n'>Line</span><span class='o'>(</span><span class='k'>this</span><span class='o'>.</span><span class='na'>board</span><span class='o'>,</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>box1</span><span class='o'>,</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>box2</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='n'>box1box2Min</span> <span class='o'>=</span> <span class='sc'>&#39;0&#39;</span><span class='o'>;</span>
    <span class='n'>box1box2Max</span> <span class='o'>=</span> <span class='sc'>&#39;N&#39;</span><span class='o'>;</span>
    <span class='n'>box2box1Min</span> <span class='o'>=</span> <span class='sc'>&#39;1&#39;</span><span class='o'>;</span>
    <span class='n'>box2box1Max</span> <span class='o'>=</span> <span class='sc'>&#39;1&#39;</span><span class='o'>;</span>
    <span class='n'>draw</span><span class='o'>();</span>
    <span class='n'>defaultLineWidth</span> <span class='o'>=</span> <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>lineWidth</span><span class='o'>;</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>The min..max cardinalities are displayed in the draw method of the Line class.</p>

<p><strong>Code 07-08.32</strong>: The draw method of the Line class.</p>
<div class='highlight'><pre><code class='java'>  <span class='kt'>void</span> <span class='nf'>draw</span><span class='o'>()</span> <span class='o'>{</span>
    <span class='k'>if</span> <span class='o'>(!</span><span class='n'>isHidden</span><span class='o'>())</span> <span class='o'>{</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>beginPath</span><span class='o'>();</span>
      <span class='err'>…</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>font</span> <span class='o'>=</span> <span class='err'>&#39;&#39;</span> <span class='o'>+</span> <span class='n'>textFontSize</span> <span class='o'>+</span> <span class='err'>&#39;</span><span class='n'>px</span> <span class='n'>sans</span><span class='o'>-</span><span class='n'>serif</span><span class='err'>&#39;</span><span class='o'>;</span>
      <span class='n'>Point</span> <span class='n'>box1box2MinMaxPoint</span> <span class='o'>=</span> 
        <span class='n'>calculateMinMaxPointCloseToBeginBox</span><span class='o'>(</span><span class='n'>box1</span><span class='o'>,</span> <span class='n'>box2</span><span class='o'>);</span>
      <span class='n'>Point</span> <span class='n'>box2box1MinMaxPoint</span> <span class='o'>=</span> 
        <span class='n'>calculateMinMaxPointCloseToBeginBox</span><span class='o'>(</span><span class='n'>box2</span><span class='o'>,</span> <span class='n'>box1</span><span class='o'>);</span>
      <span class='n'>String</span> <span class='n'>box1box2MinMax</span> <span class='o'>=</span> <span class='n'>box1box2Min</span> <span class='o'>+</span> <span class='err'>&#39;</span><span class='o'>..</span><span class='err'>&#39;</span> <span class='o'>+</span> <span class='n'>box1box2Max</span><span class='o'>;</span>
      <span class='n'>String</span> <span class='n'>box2box1MinMax</span> <span class='o'>=</span> <span class='n'>box2box1Min</span> <span class='o'>+</span> <span class='err'>&#39;</span><span class='o'>..</span><span class='err'>&#39;</span> <span class='o'>+</span> <span class='n'>box2box1Max</span><span class='o'>;</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>fillText</span><span class='o'>(</span><span class='n'>box1box2MinMax</span><span class='o'>,</span> 
        <span class='n'>box1box2MinMaxPoint</span><span class='o'>.</span><span class='na'>x</span><span class='o'>,</span> <span class='n'>box1box2MinMaxPoint</span><span class='o'>.</span><span class='na'>y</span><span class='o'>);</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>fillText</span><span class='o'>(</span><span class='n'>box2box1MinMax</span><span class='o'>,</span> 
        <span class='n'>box2box1MinMaxPoint</span><span class='o'>.</span><span class='na'>x</span><span class='o'>,</span> <span class='n'>box2box1MinMaxPoint</span><span class='o'>.</span><span class='na'>y</span><span class='o'>);</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>closePath</span><span class='o'>();</span>
      <span class='n'>board</span><span class='o'>.</span><span class='na'>context</span><span class='o'>.</span><span class='na'>stroke</span><span class='o'>();</span>
    <span class='o'>}</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>The calculateMinMaxPointCloseToBeginBox method returns a point where the min..max cardinalities close to the first box given will be positioned. The point is calculated with the help of the getIntersectionPoint method of the Box class.</p>

<p><strong>Code 07-08.33</strong>: The point where min and max cardinalities will be displayed.</p>
<div class='highlight'><pre><code class='java'>  <span class='n'>Point</span> <span class='nf'>calculateMinMaxPointCloseToBeginBox</span><span class='o'>(</span><span class='n'>Box</span> <span class='n'>beginBox</span><span class='o'>,</span> <span class='n'>Box</span> <span class='n'>endBox</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='kt'>int</span> <span class='n'>x</span> <span class='o'>=</span> <span class='mi'>0</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>y</span> <span class='o'>=</span> <span class='mi'>0</span><span class='o'>;</span>
    
    <span class='n'>Point</span> <span class='n'>lineBeginPoint</span> <span class='o'>=</span> <span class='n'>beginBox</span><span class='o'>.</span><span class='na'>center</span><span class='o'>();</span>
    <span class='n'>Point</span> <span class='n'>lineEndPoint</span> <span class='o'>=</span> <span class='n'>endBox</span><span class='o'>.</span><span class='na'>center</span><span class='o'>();</span>
    <span class='n'>Point</span> <span class='n'>beginPoint</span> <span class='o'>=</span> 
      <span class='n'>beginBox</span><span class='o'>.</span><span class='na'>getIntersectionPoint</span><span class='o'>(</span><span class='n'>lineBeginPoint</span><span class='o'>,</span> <span class='n'>lineEndPoint</span><span class='o'>);</span>
    <span class='n'>Point</span> <span class='n'>endPoint</span> <span class='o'>=</span> 
      <span class='n'>endBox</span><span class='o'>.</span><span class='na'>getIntersectionPoint</span><span class='o'>(</span><span class='n'>lineEndPoint</span><span class='o'>,</span> <span class='n'>lineBeginPoint</span><span class='o'>);</span>
    
    <span class='kt'>int</span> <span class='n'>x1</span> <span class='o'>=</span> <span class='n'>beginPoint</span><span class='o'>.</span><span class='na'>x</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>y1</span> <span class='o'>=</span> <span class='n'>beginPoint</span><span class='o'>.</span><span class='na'>y</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>x2</span> <span class='o'>=</span> <span class='n'>endPoint</span><span class='o'>.</span><span class='na'>x</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>y2</span> <span class='o'>=</span> <span class='n'>endPoint</span><span class='o'>.</span><span class='na'>y</span><span class='o'>;</span>
    
    <span class='k'>if</span> <span class='o'>(</span><span class='n'>x1</span> <span class='o'>&lt;=</span> <span class='n'>x2</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>x</span> <span class='o'>=</span> <span class='n'>x1</span> <span class='o'>+</span> <span class='mi'>1</span> <span class='o'>*</span> <span class='o'>((</span><span class='n'>x2</span> <span class='o'>-</span> <span class='n'>x1</span><span class='o'>)</span> <span class='o'>/</span> <span class='mi'>8</span><span class='o'>);</span>
      <span class='k'>if</span> <span class='o'>(</span><span class='n'>y1</span> <span class='o'>&lt;=</span> <span class='n'>y2</span><span class='o'>)</span> <span class='o'>{</span>
        <span class='n'>y</span> <span class='o'>=</span> <span class='n'>y1</span> <span class='o'>+</span> <span class='mi'>1</span> <span class='o'>*</span> <span class='o'>((</span><span class='n'>y2</span> <span class='o'>-</span> <span class='n'>y1</span><span class='o'>)</span> <span class='o'>/</span> <span class='mi'>8</span><span class='o'>);</span>
      <span class='o'>}</span> <span class='k'>else</span> <span class='o'>{</span>
        <span class='n'>y</span> <span class='o'>=</span> <span class='n'>y2</span> <span class='o'>+</span> <span class='mi'>7</span> <span class='o'>*</span> <span class='o'>((</span><span class='n'>y1</span> <span class='o'>-</span> <span class='n'>y2</span><span class='o'>)</span> <span class='o'>/</span> <span class='mi'>8</span><span class='o'>);</span>
      <span class='o'>}</span>
    <span class='o'>}</span> <span class='k'>else</span> <span class='o'>{</span>
      <span class='n'>x</span> <span class='o'>=</span> <span class='n'>x2</span> <span class='o'>+</span> <span class='mi'>7</span> <span class='o'>*</span> <span class='o'>((</span><span class='n'>x1</span> <span class='o'>-</span> <span class='n'>x2</span><span class='o'>)</span> <span class='o'>/</span> <span class='mi'>8</span><span class='o'>);</span>
      <span class='k'>if</span> <span class='o'>(</span><span class='n'>y1</span> <span class='o'>&lt;=</span> <span class='n'>y2</span><span class='o'>)</span> <span class='o'>{</span>
        <span class='n'>y</span> <span class='o'>=</span> <span class='n'>y1</span> <span class='o'>+</span> <span class='mi'>1</span> <span class='o'>*</span> <span class='o'>((</span><span class='n'>y2</span> <span class='o'>-</span> <span class='n'>y1</span><span class='o'>)</span> <span class='o'>/</span> <span class='mi'>8</span><span class='o'>);</span>
      <span class='o'>}</span> <span class='k'>else</span> <span class='o'>{</span>
        <span class='n'>y</span> <span class='o'>=</span> <span class='n'>y2</span> <span class='o'>+</span> <span class='mi'>7</span> <span class='o'>*</span> <span class='o'>((</span><span class='n'>y1</span> <span class='o'>-</span> <span class='n'>y2</span><span class='o'>)</span> <span class='o'>/</span> <span class='mi'>8</span><span class='o'>);</span>
      <span class='o'>}</span>
    <span class='o'>}</span>
    <span class='k'>return</span> <span class='k'>new</span> <span class='nf'>Point</span><span class='o'>(</span><span class='n'>x</span><span class='o'>,</span> <span class='n'>y</span><span class='o'>);</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>The getIntersectionPoint method in Spiral 08, uses the x and y local variables that hide values of the x and y attributes of the Box class. In order to make a distinction between local variables and attributes, the <strong>this</strong> keyword is used to qualify the attributes of the Box class.</p>

<p><strong>Code 07-08.34</strong>: The getIntersectionPoint of the Box class.</p>
<div class='highlight'><pre><code class='java'>  <span class='n'>Point</span> <span class='nf'>getIntersectionPoint</span><span class='o'>(</span><span class='n'>Point</span> <span class='n'>lineBeginPoint</span><span class='o'>,</span> <span class='n'>Point</span> <span class='n'>lineEndPoint</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='kt'>int</span> <span class='n'>x1</span> <span class='o'>=</span> <span class='n'>lineBeginPoint</span><span class='o'>.</span><span class='na'>x</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>y1</span> <span class='o'>=</span> <span class='n'>lineBeginPoint</span><span class='o'>.</span><span class='na'>y</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>x2</span> <span class='o'>=</span> <span class='n'>lineEndPoint</span><span class='o'>.</span><span class='na'>x</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>y2</span> <span class='o'>=</span> <span class='n'>lineEndPoint</span><span class='o'>.</span><span class='na'>y</span><span class='o'>;</span>
    <span class='k'>if</span> <span class='o'>(</span><span class='n'>x2</span> <span class='o'>==</span> <span class='n'>x1</span><span class='o'>)</span> <span class='cm'>/* vertical line */</span>
      <span class='k'>return</span> <span class='k'>new</span> <span class='nf'>Point</span><span class='o'>(</span><span class='n'>x2</span><span class='o'>,</span> <span class='o'>(</span><span class='n'>y2</span> <span class='o'>&lt;</span> <span class='n'>y1</span> <span class='o'>?</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span> <span class='o'>:</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span> <span class='o'>+</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>height</span><span class='o'>));</span>
    <span class='k'>if</span> <span class='o'>(</span><span class='n'>y2</span> <span class='o'>==</span> <span class='n'>y1</span><span class='o'>)</span> <span class='cm'>/* horizontal line */</span>
      <span class='k'>return</span> <span class='k'>new</span> <span class='nf'>Point</span><span class='o'>((</span><span class='n'>x2</span> <span class='o'>&lt;</span> <span class='n'>x1</span> <span class='o'>?</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>x</span> <span class='o'>:</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>x</span> <span class='o'>+</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>width</span><span class='o'>),</span> <span class='n'>y2</span><span class='o'>);</span>

    <span class='kt'>double</span> <span class='n'>m</span> <span class='o'>=</span> <span class='o'>(</span><span class='n'>y2</span> <span class='o'>-</span> <span class='n'>y1</span><span class='o'>)</span> <span class='o'>/</span> <span class='o'>(</span><span class='n'>x2</span> <span class='o'>-</span> <span class='n'>x1</span><span class='o'>);</span>
    <span class='kt'>int</span> <span class='n'>x</span> <span class='o'>=</span> <span class='o'>(</span><span class='n'>x2</span> <span class='o'>&lt;</span> <span class='n'>x1</span> <span class='o'>?</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>x</span> <span class='o'>:</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>x</span> <span class='o'>+</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>width</span><span class='o'>);</span>
    <span class='kt'>double</span> <span class='n'>fy</span> <span class='o'>=</span> <span class='n'>m</span> <span class='o'>*</span> <span class='o'>(</span><span class='n'>x</span> <span class='o'>-</span> <span class='n'>x2</span><span class='o'>)</span> <span class='o'>+</span> <span class='n'>y2</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>y</span><span class='o'>;</span>
    <span class='cm'>/* float comparison, because fy may be bigger than the biggest integer */</span>
    <span class='k'>if</span> <span class='o'>(</span><span class='n'>fy</span> <span class='o'>&gt;=</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span> <span class='o'>&amp;&amp;</span> <span class='n'>fy</span> <span class='o'>&lt;=</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span> <span class='o'>+</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>height</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>y</span> <span class='o'>=</span> <span class='n'>fy</span><span class='o'>.</span><span class='na'>toInt</span><span class='o'>();</span>
    <span class='o'>}</span> <span class='k'>else</span> <span class='o'>{</span>
      <span class='n'>y</span> <span class='o'>=</span> <span class='o'>(</span><span class='n'>y2</span> <span class='o'>&lt;</span> <span class='n'>y1</span> <span class='o'>?</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span> <span class='o'>:</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span> <span class='o'>+</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>height</span><span class='o'>);</span>
      <span class='n'>x</span> <span class='o'>=</span> <span class='o'>((</span><span class='n'>fy</span> <span class='o'>-</span> <span class='n'>y2</span><span class='o'>)</span> <span class='o'>/</span> <span class='n'>m</span><span class='o'>).</span><span class='na'>toInt</span><span class='o'>()</span> <span class='o'>+</span> <span class='n'>x2</span><span class='o'>;</span>
    <span class='o'>}</span>
    <span class='k'>return</span> <span class='k'>new</span> <span class='nf'>Point</span><span class='o'>(</span><span class='n'>x</span><span class='o'>,</span> <span class='n'>y</span><span class='o'>);</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>The x and y local variables are renamed intersectionX and intersectionY in this step.</p>

<p><strong>Code 07-08.35</strong>: The getIntersectionPoint of the Box class.</p>
<div class='highlight'><pre><code class='java'>  <span class='n'>Point</span> <span class='nf'>getIntersectionPoint</span><span class='o'>(</span><span class='n'>Point</span> <span class='n'>lineBeginPoint</span><span class='o'>,</span> <span class='n'>Point</span> <span class='n'>lineEndPoint</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='kt'>int</span> <span class='n'>x1</span> <span class='o'>=</span> <span class='n'>lineBeginPoint</span><span class='o'>.</span><span class='na'>x</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>y1</span> <span class='o'>=</span> <span class='n'>lineBeginPoint</span><span class='o'>.</span><span class='na'>y</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>x2</span> <span class='o'>=</span> <span class='n'>lineEndPoint</span><span class='o'>.</span><span class='na'>x</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>y2</span> <span class='o'>=</span> <span class='n'>lineEndPoint</span><span class='o'>.</span><span class='na'>y</span><span class='o'>;</span>
    <span class='k'>if</span> <span class='o'>(</span><span class='n'>x2</span> <span class='o'>==</span> <span class='n'>x1</span><span class='o'>)</span> <span class='cm'>/* vertical line */</span>
      <span class='k'>return</span> <span class='k'>new</span> <span class='nf'>Point</span><span class='o'>(</span><span class='n'>x2</span><span class='o'>,</span> <span class='o'>(</span><span class='n'>y2</span> <span class='o'>&lt;</span> <span class='n'>y1</span> <span class='o'>?</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span> <span class='o'>:</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span> <span class='o'>+</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>height</span><span class='o'>));</span>
    <span class='k'>if</span> <span class='o'>(</span><span class='n'>y2</span> <span class='o'>==</span> <span class='n'>y1</span><span class='o'>)</span> <span class='cm'>/* horizontal line */</span>
      <span class='k'>return</span> <span class='k'>new</span> <span class='nf'>Point</span><span class='o'>((</span><span class='n'>x2</span> <span class='o'>&lt;</span> <span class='n'>x1</span> <span class='o'>?</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>x</span> <span class='o'>:</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>x</span> <span class='o'>+</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>width</span><span class='o'>),</span> <span class='n'>y2</span><span class='o'>);</span>

    <span class='kt'>double</span> <span class='n'>m</span> <span class='o'>=</span> <span class='o'>(</span><span class='n'>y2</span> <span class='o'>-</span> <span class='n'>y1</span><span class='o'>)</span> <span class='o'>/</span> <span class='o'>(</span><span class='n'>x2</span> <span class='o'>-</span> <span class='n'>x1</span><span class='o'>);</span>
    <span class='kt'>int</span> <span class='n'>intersectionX</span> <span class='o'>=</span> <span class='o'>(</span><span class='n'>x2</span> <span class='o'>&lt;</span> <span class='n'>x1</span> <span class='o'>?</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>x</span> <span class='o'>:</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>x</span> <span class='o'>+</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>width</span><span class='o'>);</span>
    <span class='kt'>double</span> <span class='n'>fy</span> <span class='o'>=</span> <span class='n'>m</span> <span class='o'>*</span> <span class='o'>(</span><span class='n'>intersectionX</span> <span class='o'>-</span> <span class='n'>x2</span><span class='o'>)</span> <span class='o'>+</span> <span class='n'>y2</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>intersectionY</span><span class='o'>;</span>
    <span class='cm'>/* float comparison, because fy may be bigger than the biggest integer */</span>
    <span class='k'>if</span> <span class='o'>(</span><span class='n'>fy</span> <span class='o'>&gt;=</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span> <span class='o'>&amp;&amp;</span> <span class='n'>fy</span> <span class='o'>&lt;=</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span> <span class='o'>+</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>height</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>intersectionY</span> <span class='o'>=</span> <span class='n'>fy</span><span class='o'>.</span><span class='na'>toInt</span><span class='o'>();</span>
    <span class='o'>}</span> <span class='k'>else</span> <span class='o'>{</span>
      <span class='n'>y</span> <span class='o'>=</span> <span class='o'>(</span><span class='n'>y2</span> <span class='o'>&lt;</span> <span class='n'>y1</span> <span class='o'>?</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span> <span class='o'>:</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>y</span> <span class='o'>+</span> <span class='k'>this</span><span class='o'>.</span><span class='na'>height</span><span class='o'>);</span>
      <span class='n'>x</span> <span class='o'>=</span> <span class='o'>((</span><span class='n'>fy</span> <span class='o'>-</span> <span class='n'>y2</span><span class='o'>)</span> <span class='o'>/</span> <span class='n'>m</span><span class='o'>).</span><span class='na'>toInt</span><span class='o'>()</span> <span class='o'>+</span> <span class='n'>x2</span><span class='o'>;</span>
    <span class='o'>}</span>
    <span class='k'>return</span> <span class='k'>new</span> <span class='nf'>Point</span><span class='o'>(</span><span class='n'>intersectionX</span><span class='o'>,</span> <span class='n'>intersectionY</span><span class='o'>);</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>Since local variables do not have the same names as the attributes, the <strong>this</strong> keyword is removed from the next step.</p>

<p><strong>Code 07-08.36</strong>: The getIntersectionPoint of the Box class.</p>
<div class='highlight'><pre><code class='java'>  <span class='n'>Point</span> <span class='nf'>getIntersectionPoint</span><span class='o'>(</span><span class='n'>Point</span> <span class='n'>lineBeginPoint</span><span class='o'>,</span> <span class='n'>Point</span> <span class='n'>lineEndPoint</span><span class='o'>)</span> <span class='o'>{</span>
    <span class='kt'>int</span> <span class='n'>x1</span> <span class='o'>=</span> <span class='n'>lineBeginPoint</span><span class='o'>.</span><span class='na'>x</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>y1</span> <span class='o'>=</span> <span class='n'>lineBeginPoint</span><span class='o'>.</span><span class='na'>y</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>x2</span> <span class='o'>=</span> <span class='n'>lineEndPoint</span><span class='o'>.</span><span class='na'>x</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>y2</span> <span class='o'>=</span> <span class='n'>lineEndPoint</span><span class='o'>.</span><span class='na'>y</span><span class='o'>;</span>
    <span class='k'>if</span> <span class='o'>(</span><span class='n'>x2</span> <span class='o'>==</span> <span class='n'>x1</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='cm'>/* vertical line */</span>
      <span class='k'>return</span> <span class='k'>new</span> <span class='nf'>Point</span><span class='o'>(</span><span class='n'>x2</span><span class='o'>,</span> <span class='o'>(</span><span class='n'>y2</span> <span class='o'>&lt;</span> <span class='n'>y1</span> <span class='o'>?</span> <span class='n'>y</span> <span class='o'>:</span> <span class='n'>y</span> <span class='o'>+</span> <span class='n'>height</span><span class='o'>));</span>
    <span class='o'>}</span> 
    <span class='k'>if</span> <span class='o'>(</span><span class='n'>y2</span> <span class='o'>==</span> <span class='n'>y1</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='cm'>/* horizontal line */</span>
      <span class='k'>return</span> <span class='k'>new</span> <span class='nf'>Point</span><span class='o'>((</span><span class='n'>x2</span> <span class='o'>&lt;</span> <span class='n'>x1</span> <span class='o'>?</span> <span class='n'>x</span> <span class='o'>:</span> <span class='n'>x</span> <span class='o'>+</span> <span class='n'>width</span><span class='o'>),</span> <span class='n'>y2</span><span class='o'>);</span>
    <span class='o'>}</span> 
      
    <span class='kt'>double</span> <span class='n'>m</span> <span class='o'>=</span> <span class='o'>(</span><span class='n'>y2</span> <span class='o'>-</span> <span class='n'>y1</span><span class='o'>)</span> <span class='o'>/</span> <span class='o'>(</span><span class='n'>x2</span> <span class='o'>-</span> <span class='n'>x1</span><span class='o'>);</span>
    <span class='kt'>int</span> <span class='n'>intersectionX</span> <span class='o'>=</span> <span class='o'>(</span><span class='n'>x2</span> <span class='o'>&lt;</span> <span class='n'>x1</span> <span class='o'>?</span> <span class='n'>x</span> <span class='o'>:</span> <span class='n'>x</span> <span class='o'>+</span> <span class='n'>width</span><span class='o'>);</span>
    <span class='kt'>double</span> <span class='n'>fy</span> <span class='o'>=</span> <span class='n'>m</span> <span class='o'>*</span> <span class='o'>(</span><span class='n'>intersectionX</span> <span class='o'>-</span> <span class='n'>x2</span><span class='o'>)</span> <span class='o'>+</span> <span class='n'>y2</span><span class='o'>;</span>
    <span class='kt'>int</span> <span class='n'>intersectionY</span><span class='o'>;</span>
    <span class='cm'>/* float comparison, because fy may be bigger than the biggest integer */</span>
    <span class='k'>if</span> <span class='o'>(</span><span class='n'>fy</span> <span class='o'>&gt;=</span> <span class='n'>y</span> <span class='o'>&amp;&amp;</span> <span class='n'>fy</span> <span class='o'>&lt;=</span> <span class='n'>y</span> <span class='o'>+</span> <span class='n'>height</span><span class='o'>)</span> <span class='o'>{</span>
      <span class='n'>intersectionY</span> <span class='o'>=</span> <span class='n'>fy</span><span class='o'>.</span><span class='na'>toInt</span><span class='o'>();</span>
    <span class='o'>}</span> <span class='k'>else</span> <span class='o'>{</span>
      <span class='n'>y</span> <span class='o'>=</span> <span class='o'>(</span><span class='n'>y2</span> <span class='o'>&lt;</span> <span class='n'>y1</span> <span class='o'>?</span> <span class='n'>y</span> <span class='o'>:</span> <span class='n'>y</span> <span class='o'>+</span> <span class='n'>height</span><span class='o'>);</span>
      <span class='n'>x</span> <span class='o'>=</span> <span class='o'>((</span><span class='n'>fy</span> <span class='o'>-</span> <span class='n'>y2</span><span class='o'>)</span> <span class='o'>/</span> <span class='n'>m</span><span class='o'>).</span><span class='na'>toInt</span><span class='o'>()</span> <span class='o'>+</span> <span class='n'>x2</span><span class='o'>;</span>
    <span class='o'>}</span>
    <span class='k'>return</span> <span class='k'>new</span> <span class='nf'>Point</span><span class='o'>(</span><span class='n'>intersectionX</span><span class='o'>,</span> <span class='n'>intersectionY</span><span class='o'>);</span>
  <span class='o'>}</span>
</code></pre>
</div>
<p>A meta model is a model about models. A simple meta model, shown in Figure 07-08.06, representing models, model concepts and concept attributes is designed in the last step of Spiral 08.</p>

<p><img src='/img/s07s08/SimpleMetaModel.png' alt='Alt Figure 07-08.06: Cardinalities in a simple meta model' /></p>

<p><strong>Figure 07-08.06</strong>: Cardinalities in a simple meta model.</p>
        </section>

        <section>
     
        </section>

        <footer>
          <a href="http://dzenanr.github.com/ondart.rss">
            <img src="/img/xml.gif" width=36 height=14 alt="RSS feed for this site" border=0>
          </a>
        </footer>

    </body>
</html>


